{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nexport default {\n  props: {\n    items: {\n      default: [],\n      type: Array\n    },\n    filterby: {\n      type: String\n    },\n    title: {\n      default: 'Select One...',\n      type: String\n    },\n    shouldReset: {\n      type: Boolean,\n      default: true\n    }\n  },\n\n  data() {\n    return {\n      itemHeight: 39,\n      selectedItem: null,\n      selected: 0,\n      query: '',\n      visible: false\n    };\n  },\n\n  methods: {\n    toggleVisible() {\n      this.visible = !this.visible;\n      setTimeout(() => {\n        this.$refs.input.focus();\n      }, 50);\n    },\n\n    itemClicked(index) {\n      this.selected = index;\n      this.selectItem();\n    },\n\n    selectItem() {\n      if (!this.matches.length) {\n        return;\n      }\n\n      this.selectedItem = this.matches[this.selected];\n      this.visible = false;\n\n      if (this.shouldReset) {\n        this.query = '';\n        this.selected = 0;\n      }\n\n      this.$emit('selected', JSON.parse(JSON.stringify(this.selectedItem)));\n    },\n\n    up() {\n      if (this.selected == 0) {\n        return;\n      }\n\n      this.selected -= 1;\n      this.scrollToItem();\n    },\n\n    down() {\n      if (this.selected >= this.matches.length - 1) {\n        return;\n      }\n\n      this.selected += 1;\n      this.scrollToItem();\n    },\n\n    scrollToItem() {\n      this.$refs.optionsList.scrollTop = this.selected * this.itemHeight;\n    }\n\n  },\n  computed: {\n    matches() {\n      this.$emit('change', this.query);\n\n      if (this.query == '') {\n        return [];\n      }\n\n      var n = 100;\n      let chunk = this.items;\n\n      Array.prototype.chunk = function (n) {\n        if (!this.length) {\n          return [];\n        }\n\n        console.log([this.slice(0, n)].concat(this.slice(n).chunk(n))); // return [this.slice(0, n)].concat(this.slice(n).chunk(n));\n      }; // console.log(this.items.chunk(10));\n\n\n      return this.items.filter(item => item[this.filterby].toLowerCase().includes(this.query.toLowerCase()));\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["props","items","default","type","Array","filterby","String","title","shouldReset","Boolean","data","itemHeight","selectedItem","selected","query","visible","methods","toggleVisible","setTimeout","$refs","input","focus","itemClicked","index","selectItem","matches","length","$emit","JSON","parse","stringify","up","scrollToItem","down","optionsList","scrollTop","computed","n","chunk","prototype","console","log","slice","concat","filter","item","toLowerCase","includes"],"sourceRoot":"","sources":["F:\\softvue\\src\\layout\\base\\Autocomplete.vue"],"sourcesContent":["<template>\r\n  <div class=\"autocomplete\">\r\n    <div class=\"input\" @click=\"toggleVisible\" v-text=\"selectedItem ? selectedItem[filterby] : ''\"></div>\r\n    <div class=\"placeholder\" v-if=\"selectedItem == null\" v-text=\"title\"></div>\r\n    <button class=\"close\" @click=\"selectedItem = null\" v-if=\"selectedItem\">x</button>\r\n    <div class=\"popover\" v-show=\"visible\">\r\n      <input type=\"text\"\r\n        ref=\"input\"\r\n        v-model=\"query\"\r\n        @keydown.up=\"up\"\r\n        @keydown.down=\"down\"\r\n        @keydown.enter=\"selectItem\"\r\n        placeholder=\"Start Typing...\"\r\n        \r\n        >\r\n      <div class=\"options\" ref=\"optionsList\">\r\n        <ul>\r\n          <li v-for=\"(match, index) in matches\"\r\n            :key=\"index\"\r\n            :class=\"{ 'selected': (selected == index)}\"\r\n            @click=\"itemClicked(index)\"\r\n            v-text=\"match[filterby]\"></li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    props: {\r\n      items: {\r\n        default: [],\r\n        type: Array\r\n      },\r\n      filterby: {\r\n        type: String\r\n      },\r\n      title: {\r\n        default: 'Select One...',\r\n        type: String\r\n      },\r\n      shouldReset: {\r\n        type: Boolean,\r\n        default: true\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        itemHeight: 39,\r\n        selectedItem: null,\r\n        selected: 0,\r\n        query: '',\r\n        visible: false\r\n      };\r\n    },\r\n    methods: {\r\n      toggleVisible() {\r\n        this.visible = !this.visible;\r\n\r\n        setTimeout(() => {\r\n          this.$refs.input.focus();\r\n        }, 50);\r\n      },\r\n      itemClicked(index) {\r\n        this.selected = index;\r\n        this.selectItem();\r\n      },\r\n      selectItem() {\r\n        if (!this.matches.length) {\r\n          return;\r\n        }\r\n\r\n        this.selectedItem = this.matches[this.selected];\r\n        this.visible = false;\r\n\r\n        if (this.shouldReset) {\r\n          this.query = '';\r\n          this.selected = 0;\r\n        }\r\n\r\n        this.$emit('selected', JSON.parse(JSON.stringify(this.selectedItem)));\r\n      },\r\n      up() {\r\n        if (this.selected == 0) {\r\n          return;\r\n        }\r\n\r\n        this.selected -= 1;\r\n        this.scrollToItem();\r\n      },\r\n      down() {\r\n        if (this.selected >= this.matches.length - 1) {\r\n          return;\r\n        }\r\n\r\n        this.selected += 1;\r\n        this.scrollToItem();\r\n      },\r\n      scrollToItem() {\r\n        this.$refs.optionsList.scrollTop = this.selected * this.itemHeight;\r\n      }\r\n    },\r\n    computed: {\r\n      matches() {\r\n        this.$emit('change', this.query);\r\n\r\n        if (this.query == '') {\r\n          return [];\r\n        }\r\n        var n = 100;\r\n        let chunk = this.items;\r\n        Array.prototype.chunk = function(n) {\r\n            if (!this.length) {\r\n                return [];\r\n            }\r\n            console.log([this.slice(0, n)].concat(this.slice(n).chunk(n)))\r\n            // return [this.slice(0, n)].concat(this.slice(n).chunk(n));\r\n            };\r\n\r\n        // console.log(this.items.chunk(10));\r\n\r\n        return this.items.filter((item) => item[this.filterby].toLowerCase().includes(this.query.toLowerCase()))\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.autocomplete {\r\n    width: 100%;\r\n    position: relative;\r\n}\r\n.input {\r\n    height: 40px;\r\n    border-radius: 3px;\r\n    border: 2px solid lightgray;\r\n    box-shadow: 0 0 10px #eceaea;\r\n    font-size: 25px;\r\n    padding-left: 10px;\r\n    padding-top: 10px;\r\n    cursor: text;\r\n}\r\n.close {\r\n    position: absolute;\r\n    right: 2px;\r\n    top: 4px;\r\n    background: none;\r\n    border: none;\r\n    font-size: 30px;\r\n    color: lightgrey;\r\n    cursor: pointer;\r\n}\r\n.placeholder {\r\n    position: absolute;\r\n    top: 11px;\r\n    left: 11px;\r\n    font-size: 25px;\r\n    color: #d0d0d0;\r\n    pointer-events: none;\r\n}\r\n.popover {\r\n    min-height: 50px;\r\n    border: 2px solid lightgray;\r\n    position: absolute;\r\n    top: 46px;\r\n    left: 0;\r\n    right: 0;\r\n    background: #fff;\r\n    border-radius: 3px;\r\n    text-align: center;\r\n}\r\n.popover input {\r\n    width: 95%;\r\n    margin-top: 5px;\r\n    height: 40px;\r\n    font-size: 16px;\r\n    border-radius: 3px;\r\n    border: 1px solid lightgray;\r\n    padding-left: 8px;\r\n}\r\n.options {\r\n    max-height: 150px;\r\n    overflow-y: scroll;\r\n    margin-top: 5px;\r\n}\r\n.options ul {\r\n    list-style-type: none;\r\n    text-align: left;\r\n    padding-left: 0;\r\n}\r\n.options ul li {\r\n    border-bottom: 1px solid lightgray;\r\n    padding: 10px;\r\n    cursor: pointer;\r\n    background: #f1f1f1;\r\n}\r\n.options ul li:first-child {\r\n    border-top: 2px solid #d6d6d6;\r\n}\r\n\r\n.options ul li:not(.selected):hover {\r\n    background: #8c8c8c;\r\n    color: #fff;\r\n}\r\n.options ul li.selected {\r\n    background: #58bd4c;\r\n    color: #fff;\r\n    font-weight: 600;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}