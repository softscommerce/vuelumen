{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { ref, reactive, onMounted, watch, computed } from 'vue';\nimport serviceApi from './composible/service-api.js';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  setup() {\n    const router = useRouter();\n    const store = useStore();\n    const search_data = ref([]);\n    const search_text = ref('');\n    const profile_data = ref([]);\n    const id = ref('');\n    const confirm = ref([]);\n    const modalShow = ref(false);\n\n    const shopActive = async (data, id) => {\n      let datas = true;\n\n      if (data == 'true') {\n        datas = false;\n      }\n\n      console.log(datas);\n      const form = new FormData();\n      form.append('id', id);\n      form.append('data', datas);\n      const shopdata = await serviceApi.shopActiveOff(form);\n\n      if (shopdata.data.data) {\n        const payload = {\n          type: shopdata.data.type,\n          message: shopdata.data.data\n        };\n        store.dispatch('addNotification', payload);\n        const profile = await serviceApi.getServiceProfileList();\n        profile_data.value = profile.data.data;\n      }\n    };\n\n    const onClick = data => {\n      modalShow.value = true;\n      id.value = data;\n    };\n\n    const payNow = async data => {\n      const form = new FormData();\n      form.append('id', data);\n      console.log(data);\n      const pays = await serviceApi.payNow(form);\n      console.log(pays.data);\n\n      if (pays.data.data) {\n        const payload = {\n          type: pays.data.type,\n          message: pays.data.data\n        };\n        store.dispatch('addNotification', payload);\n\n        if (pays.data.route == 'route') {\n          router.push('/user-balance');\n        }\n\n        modalShow.value = false;\n        const profile = await serviceApi.getServiceProfileList();\n        profile_data.value = profile.data.data;\n      }\n    };\n\n    const selectAll = () => {\n      select_value.value = [];\n\n      if (!selected_all.value) {\n        // Check all\n        for (var key in profile_data.value) {\n          select_value.value.push(profile_data.value[key]._id);\n          selected_all.value = true;\n        }\n      } else {\n        select_value.value = [];\n        selected_all.value = false;\n      }\n    };\n\n    watch(page, (newold, old) => {\n      getPaginateProduct(page.count);\n    });\n\n    const setPages = () => {\n      let numberOfPages = Math.ceil(product_all_data.value.length / 20);\n      setTimeout(() => {\n        for (let index = 1; index <= numberOfPages; index++) {\n          console.log('ok');\n          pages.value.push(index);\n          console.log(pages.value);\n        }\n      }, 100);\n    };\n\n    const updateCheckall = () => {\n      if (select_value.value.length == profile_data.value.length) {\n        selected_all.value = true;\n      } else {\n        selected_all.value = false;\n      }\n\n      console.log(selected_all.value);\n    };\n\n    const productActionSubmit = async () => {\n      const form = new FormData();\n      form.append('select_value', select_value.value);\n      form.append('product_action', product_action.value);\n      console.log(select_value.value, selected_all.value);\n      const productDelete = await serviceApi.allProductDelete(form);\n      const payload = {\n        type: productDelete.data.type,\n        message: productDelete.data.data\n      };\n      store.dispatch('addNotification', payload); //  const products =  await productApi.getServiceProfileList();\n      //     profile_data.value = products.data.data;\n    };\n\n    const getPaginateProduct = async page => {\n      const products = await serviceApi.getAll(page);\n      profile_data.value = products.data.data;\n    };\n\n    onMounted(async () => {\n      const profile = await serviceApi.getServiceProfileList();\n      profile_data.value = profile.data.data;\n      console.log(profile_data.value); // setPages();\n      // getPaginateProduct();\n    });\n    const unpaid = computed(() => {\n      const unpaids = profile_data.value.filter(item => {\n        return item.paystatus == \"0\";\n      });\n      return unpaids.length;\n    });\n    const paid = computed(() => {\n      const paids = profile_data.value.filter(item => {\n        return item.paystatus == \"1\";\n      });\n      return paids.length;\n    });\n\n    const fetchDateTimeFormate = data => {\n      var items = data.split(' ');\n      return items[0] + ' at ' + items[1] + ' ' + items[2];\n    };\n\n    const deleteProduct = data => {\n      profile_data.value = profile_data.value.filter(item => {\n        return item._id != data._id;\n      });\n      serviceApi.delete(data._id).then(res => {\n        const payload = {\n          type: res.data.type,\n          message: res.data.data\n        };\n        store.dispatch('addNotification', payload);\n      });\n    };\n\n    const TableSearch = () => {\n      if (search_text.value.length > 0) {\n        return search_data.value = profile_data.value.filter(item => {\n          return item.product_name.toLowerCase().includes(search_text.value.toLowerCase()) || item.category.name.toLowerCase().includes(search_text.value.toLowerCase()) || item.sale_price.toLowerCase().includes(search_text.value.toLowerCase());\n        });\n      } else {\n        return profile_data.value;\n      }\n    };\n\n    return {\n      profile_data,\n      search_data,\n      search_text,\n      TableSearch,\n      fetchDateTimeFormate,\n      deleteProduct,\n      product_action,\n      productActionSubmit,\n      updateCheckall,\n      product_all_data,\n      getPaginateProduct,\n      onClick,\n      modalShow,\n      confirm,\n      payNow,\n      id,\n      shopActive,\n      unpaid,\n      paid\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["ref","reactive","onMounted","watch","computed","serviceApi","useStore","useRouter","setup","router","store","search_data","search_text","profile_data","id","confirm","modalShow","shopActive","data","datas","console","log","form","FormData","append","shopdata","shopActiveOff","payload","type","message","dispatch","profile","getServiceProfileList","value","onClick","payNow","pays","route","push","selectAll","select_value","selected_all","key","_id","page","newold","old","getPaginateProduct","count","setPages","numberOfPages","Math","ceil","product_all_data","length","setTimeout","index","pages","updateCheckall","productActionSubmit","product_action","productDelete","allProductDelete","products","getAll","unpaid","unpaids","filter","item","paystatus","paid","paids","fetchDateTimeFormate","items","split","deleteProduct","delete","then","res","TableSearch","product_name","toLowerCase","includes","category","name","sale_price"],"sourceRoot":"","sources":["F:\\xampp\\htdocs\\softcode\\softvue\\src\\modules\\user\\view\\service\\page\\ServicePage.vue"],"sourcesContent":["<template>\r\n    <div class=\"users\">\r\n        <div class=\"lists\">\r\n            <div class=\"data_view\">\r\n                <ul class=\"items\">\r\n                    <li class=\"item\">\r\n                        <router-link to=\"\" class=\"link\">Paid <span class=\"count\">({{paid}})</span></router-link>\r\n                    </li> |\r\n                    <li class=\"item\">\r\n                        <router-link to=\"\" class=\"link\">Unpaid <span class=\"count\">({{unpaid}})</span>\r\n                        </router-link>\r\n                    </li>\r\n                </ul>\r\n                <div class=\"search\">\r\n                    <!--<form class=\"\">-->\r\n                    <input type=\"text\" class=\"form-control\" @keyup=\"TableSearch\" v-model=\"search_text\">\r\n                    <!--<button type=\"submit\" class=\"btn btn_sm btn_border\">Search</button>-->\r\n                    <!--</form>-->\r\n                </div>\r\n            </div>\r\n\r\n         \r\n            <div class=\"table_responsive\">\r\n                <table class=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>SL</th>\r\n                            <th>Profile</th>\r\n                            <th>Station</th>\r\n                            <th>Category</th>\r\n                            <th>Type</th>\r\n                            <th>Expire</th>\r\n                            <th>Pay</th>\r\n                            <th>Status</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody v-if=\"search_text != ''\">\r\n                        <tr v-if=\"search_data == ''\">\r\n                            <td colspan=\"6\">Search Not Found!</td>\r\n                        </tr>\r\n                        <tr v-for=\"(data, index) in search_data\" :key=\"index\">\r\n                            <td>{{index+1}}</td>\r\n                            \r\n                            <td class=\"name\">\r\n                                <a href=\"#\">{{ data.name }}</a>\r\n                            </td>\r\n                            <td class=\"in_stock\">{{data.workstation.name}}</td>\r\n                            <td class=\"price\">{{data.category.name.en}} ৳</td>\r\n                            <td class=\"category\">{{data.profile_type}}</td>\r\n                            <td class=\"category\">{{data.expired_at}}</td>\r\n                            <td class=\"tag\"><span v-if=\"data.paystatus\">Paid</span><span v-else>Unpaid</span></td>\r\n                            <td  class=\"category\"><span v-if=\"data.status\">Open</span> <span v-else>Close</span></td>\r\n                           \r\n                            <td class=\"actions\">\r\n                                 <router-link class=\"edit\" style=\"background:green;\" :to=\"'/mypanel/service/profile/'+data._id\">View</router-link>&nbsp;\r\n                                <router-link :to=\"'/mypanel/products/edit_product/'+data._id\" class=\"edit\">Edit</router-link>&nbsp;\r\n\r\n                               <span>\r\n                                 <router-link to=\"#\" v-if=\"data.open == 'true'\" @click=\"shopActive(data.open, data._id)\" class=\"delete\">Close</router-link>\r\n                                <router-link style=\"background:green;\" to=\"#\" v-else  @click=\"shopActive(data.open, data._id)\" class=\"edit\">Open</router-link>\r\n                               </span>\r\n\r\n                                  &nbsp;\r\n\r\n                                   <router-link v-if=\"!data.paystatus\" to=\"#\" @click=\"onClick(data._id)\" class=\"edit\">Pay\r\n                                    \r\n                                   </router-link>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n\r\n                    <tbody v-else>\r\n                        <tr v-for=\"(data, index) in profile_data\" :key=\"index\">\r\n                            <td>{{index+1}}</td>\r\n                            \r\n                            <td class=\"name\">\r\n                                <a href=\"#\">{{ data.name }}</a>\r\n                            </td>\r\n                            <td class=\"in_stock\">{{data.workstation.name}}</td>\r\n                            <td class=\"price\">{{data.category.name.en}} ৳</td>\r\n                            <td class=\"category\">{{data.profile_type}}</td>\r\n                            <td class=\"category\">{{data.expired_at}}</td>\r\n                            <td class=\"tag\"><span v-if=\"data.paystatus\">Paid</span><span v-else>Unpaid</span></td>\r\n                            <td  class=\"category\"><span v-if=\"data.status\">Open</span> <span v-else>Close</span></td>\r\n                           \r\n                            <td class=\"actions\">\r\n                                 <router-link class=\"edit\" style=\"background:green;\" :to=\"'/mypanel/service/profile/'+data._id\">View</router-link>&nbsp;\r\n                                <router-link :to=\"'/mypanel/products/edit_product/'+data._id\" class=\"edit\">Edit</router-link>&nbsp;\r\n\r\n                               <span>\r\n                                 <router-link to=\"#\"  v-if=\"data.open == 'true'\" @click=\"shopActive(data.open, data._id)\" class=\"delete\">Close</router-link>\r\n                                <router-link to=\"#\" style=\"background:green;\" v-else  @click=\"shopActive(data.open, data._id)\" class=\"edit\">Open</router-link>\r\n                               </span>\r\n\r\n                                  &nbsp;\r\n\r\n                                   <router-link v-if=\"!data.paystatus\" to=\"#\" @click=\"onClick(data._id)\" class=\"edit\">Pay\r\n                                    \r\n                                   </router-link>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n                 <base-popupa v-if=\"modalShow\" :floorplan=\"profile_data[id]\" @PopupOk=\"modalShow = false\">\r\n                    <template #title>Pay Now</template>\r\n                    <template #actions>\r\n                            \r\n                            <base-button type=\"button\" @click=\"modalShow = false\">Close</base-button>\r\n                            <base-button type=\"submit\" @click=\"payNow(id)\">Ok</base-button>\r\n                        \r\n                    </template>\r\n                   </base-popupa>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref, reactive, onMounted, watch, computed } from 'vue';\r\nimport serviceApi from './composible/service-api.js';\r\nimport { useStore } from 'vuex';\r\nimport {useRouter} from 'vue-router';\r\nexport default {\r\n\r\n    \r\n\r\n    setup() {\r\n        const router = useRouter();\r\n        const store = useStore();\r\n        const search_data = ref([]);\r\n        const search_text = ref('');\r\n        const profile_data = ref([]);\r\n\r\n      \r\n        const id = ref('');\r\n\r\n        const confirm = ref([]);\r\n        const modalShow = ref(false);\r\n\r\n      \r\n\r\n\r\n\r\n        const shopActive = async (data, id) =>{\r\n            let datas = true;\r\n            if(data == 'true'){\r\n                datas = false;\r\n            }\r\n           \r\n            console.log(datas);\r\n             const form = new FormData();\r\n                form.append('id', id);\r\n                form.append('data', datas);\r\n             const shopdata = await serviceApi.shopActiveOff(form);\r\n\r\n             if(shopdata.data.data){\r\n                const payload = {\r\n                        type: shopdata.data.type,\r\n                        message: shopdata.data.data\r\n                    };\r\n                store.dispatch('addNotification', payload);\r\n                const profile =  await serviceApi.getServiceProfileList();\r\n                profile_data.value = profile.data.data;\r\n\r\n             }\r\n        }\r\n\r\n\r\n        const onClick = (data) => {\r\n            modalShow.value = true;\r\n            id.value = data;\r\n\r\n        }\r\n\r\n  \r\n         const payNow = async(data) =>{\r\n            const form = new FormData();\r\n            form.append('id', data);\r\n            console.log(data);\r\n             const pays = await serviceApi.payNow(form);\r\n             console.log(pays.data);\r\n\r\n             if(pays.data.data){\r\n                const payload = {\r\n                        type: pays.data.type,\r\n                        message: pays.data.data\r\n                    };\r\n\r\n                store.dispatch('addNotification', payload);\r\n\r\n                if(pays.data.route == 'route'){\r\n                    router.push('/user-balance');\r\n                }\r\n\r\n                  modalShow.value = false;\r\n                   const profile =  await serviceApi.getServiceProfileList();\r\n                    profile_data.value = profile.data.data;\r\n             }\r\n            }\r\n \r\n\r\n     \r\n\r\n        const selectAll = () =>{\r\n\r\n        select_value.value = [];\r\n        if(!selected_all.value){ // Check all\r\n            for (var key in profile_data.value) {\r\n            select_value.value.push( profile_data.value[key]._id);\r\n            selected_all.value = true;\r\n            }\r\n            }else{\r\n                select_value.value = [];\r\n                selected_all.value = false;\r\n            }\r\n        }\r\n\r\n        watch(page, (newold, old) => { \r\n            getPaginateProduct(page.count)\r\n\r\n                })\r\n\r\n        const setPages = () => {\r\n\t\t\tlet numberOfPages = Math.ceil( product_all_data.value.length / 20);\r\n            setTimeout(() => {\r\n                for (let index = 1; index <= numberOfPages; index++) {\r\n                console.log('ok')\r\n\t\t\t\tpages.value.push(index);\r\n                console.log(pages.value);\r\n\t\t\t}\r\n            }, 100);\r\n\t\t}\r\n\r\n      \r\n\r\n       const updateCheckall= () =>{\r\n       \r\n            if(select_value.value.length == profile_data.value.length){\r\n               selected_all.value = true;\r\n            }else{\r\n                selected_all.value = false;\r\n            }\r\n\r\n             console.log( selected_all.value)\r\n            }\r\n\r\n        const productActionSubmit = async() =>{\r\n            const form = new FormData();\r\n            form.append('select_value', select_value.value);\r\n            form.append('product_action', product_action.value);\r\n            console.log(select_value.value, selected_all.value);\r\n         const productDelete = await serviceApi.allProductDelete(form);\r\n          const payload = {\r\n            type: productDelete.data.type,\r\n            message: productDelete.data.data\r\n         };\r\n\r\n\r\n         store.dispatch('addNotification', payload)\r\n        //  const products =  await productApi.getServiceProfileList();\r\n        //     profile_data.value = products.data.data;\r\n\r\n \r\n        }   \r\n        \r\n      \r\n    const getPaginateProduct = async(page) => {\r\n         const products =  await serviceApi.getAll(page);\r\n\r\n          \r\n             profile_data.value =  products.data.data;\r\n            }\r\n        onMounted(async()=>{\r\n          \r\n           const profile =  await serviceApi.getServiceProfileList();\r\n            profile_data.value = profile.data.data;\r\n            console.log(profile_data.value)\r\n\r\n            // setPages();\r\n            // getPaginateProduct();\r\n           \r\n        });\r\n\r\n     const unpaid = computed(() =>{\r\n         const unpaids =  profile_data.value.filter(item=>{\r\n           return item.paystatus == \"0\";\r\n            });\r\n\r\n           return unpaids.length;\r\n        });\r\n\r\n         const paid = computed(() =>{\r\n         const paids =  profile_data.value.filter(item=>{\r\n           return item.paystatus == \"1\";\r\n            });\r\n\r\n           return paids.length;\r\n        });\r\n\r\n      \r\n\r\n        \r\n\r\n        const fetchDateTimeFormate = ( data) =>{\r\n             var items = data.split(' ');\r\n              return items[0]+ ' at '+items[1] + ' '+items[2];\r\n        }\r\n\r\n        const deleteProduct = (data) =>{\r\n           profile_data.value = profile_data.value.filter(item => {\r\n                    return (item._id != data._id); \r\n                });\r\n\r\n                   serviceApi.delete(data._id).then(res=>{\r\n                    const payload ={\r\n                        type: res.data.type,\r\n                        message: res.data.data\r\n                    }\r\n                    store.dispatch('addNotification', payload)\r\n\r\n                })\r\n        }\r\n\r\n        const TableSearch = () => {\r\n            if (search_text.value.length > 0) {\r\n                return search_data.value = profile_data.value.filter(item => {\r\n                    return (\r\n                        item.product_name.toLowerCase().includes(search_text.value.toLowerCase())||\r\n                        item.category.name.toLowerCase().includes(search_text.value.toLowerCase())||\r\n                        item.sale_price.toLowerCase().includes(search_text.value.toLowerCase())\r\n                    );\r\n                })\r\n            } else {\r\n                return profile_data.value;\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            profile_data,\r\n            search_data,\r\n            search_text,\r\n            TableSearch,\r\n            fetchDateTimeFormate,\r\n            deleteProduct,\r\n            product_action,\r\n            productActionSubmit,\r\n            updateCheckall,\r\n        \r\n            product_all_data,\r\n            getPaginateProduct,\r\n            onClick,\r\n            modalShow,\r\n            confirm,\r\n            payNow,\r\n            id,\r\n            shopActive,\r\n            unpaid,\r\n            paid\r\n        }\r\n    },\r\n\r\n\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n.pagination{\r\n    list-style: none;\r\n}\r\n\r\nbutton.page-link {\r\n\tdisplay: inline-block;\r\n    padding: 5px;\r\n    margin: 5px;\r\n    cursor: pointer;\r\n}\r\nbutton.page-link {\r\n    font-size: 20px;\r\n    color: #29b3ed;\r\n    font-weight: 500;\r\n}\r\n.offset{\r\n  width: 500px !important;\r\n  margin: 20px auto;  \r\n}\r\n\r\n.lists {\r\n    .heading {\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        color: #444;\r\n        margin-bottom: 10px;\r\n        .btn_border {\r\n            border: none;\r\n            outline: none;\r\n            background-color: transparent;\r\n            a {\r\n                font-weight: 600;\r\n                border: 1px solid #5492bc;\r\n                color: #5492bc;\r\n                padding: 6px 12px;\r\n                margin-left: 8px;\r\n                border-radius: 4px;\r\n                cursor: pointer;\r\n                text-decoration: none;\r\n            }\r\n        }\r\n    }\r\n\r\n    .data_view {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-wrap: wrap;\r\n        row-gap: 12px;\r\n        margin-bottom: 12px;\r\n\r\n        .items {\r\n            display: flex;\r\n            list-style: none;\r\n\r\n            .item {\r\n                .link {\r\n                    color: #5492bc;\r\n                    font-size: 14px;\r\n                    margin: 0 4px;\r\n                    cursor: pointer;\r\n                }\r\n            }\r\n        }\r\n\r\n        .search {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            row-gap: 12px;\r\n\r\n            form {\r\n                display: flex;\r\n                flex-wrap: wrap;\r\n                row-gap: 12px;\r\n            }\r\n\r\n            input {\r\n                width: 200px;\r\n                outline: none;\r\n                border: 1px solid #ddd;\r\n                border-radius: 4px;\r\n                padding: 8px;\r\n            }\r\n\r\n            button {\r\n                border: none;\r\n                outline: none;\r\n                background-color: transparent;\r\n                border: 1px solid #5492bc;\r\n                color: #5492bc;\r\n                padding: 8px 16px;\r\n                margin-left: 8px;\r\n                border-radius: 4px;\r\n                cursor: pointer;\r\n            }\r\n        }\r\n    }\r\n\r\n    .table_filter {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-wrap: wrap;\r\n        row-gap: 12px;\r\n\r\n        .actions {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            row-gap: 12px;\r\n            column-gap: 12px;\r\n\r\n            form {\r\n                display: flex;\r\n                flex-wrap: wrap;\r\n                row-gap: 12px;\r\n                column-gap: 12px;\r\n\r\n                .form_select {\r\n                    width: auto;\r\n                    outline: none;\r\n                    border: 1px solid #ddd;\r\n                    border-radius: 4px;\r\n                    padding: 8px;\r\n                }\r\n\r\n                button {\r\n                    border: none;\r\n                    outline: none;\r\n                    background-color: transparent;\r\n                    border: 1px solid #5492bc;\r\n                    color: #5492bc;\r\n                    padding: 8px 16px;\r\n                    margin-left: 8px;\r\n                    border-radius: 4px;\r\n                    cursor: pointer;\r\n                }\r\n            }\r\n        }\r\n\r\n        .pagination {\r\n            display: flex;\r\n            gap: 20px;\r\n            align-items: center;\r\n\r\n            .row_count {\r\n                font-size: 14px;\r\n                color: #444;\r\n            }\r\n\r\n            .page {\r\n                border: 1px solid #ddd;\r\n                border-radius: 4px;\r\n                overflow: hidden;\r\n\r\n                .link {\r\n                    border-right: 1px solid #ddd;\r\n                    text-decoration: none;\r\n                    padding: 4px 8px;\r\n                    display: inline-block;\r\n                    font-size: 13px;\r\n                    cursor: pointer;\r\n                    transition: all 0.3s ease 0s;\r\n                    -webkit-transition: all 0.3s ease 0s;\r\n\r\n                    &:last-child {\r\n                        border-right: 0px solid #ddd;\r\n                    }\r\n\r\n                    &:hover {\r\n                        background-color: #5492bc;\r\n                        color: #fff;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .table_responsive {\r\n        width: 100%;\r\n        overflow-x: auto;\r\n        border: 1px solid #ddd;\r\n        margin: 12px 0;\r\n\r\n        .table {\r\n            font-family: Arial, Helvetica, sans-serif;\r\n            border-collapse: collapse;\r\n            width: 100%;\r\n\r\n            td,\r\n            th {\r\n                padding: 12px 8px;\r\n            }\r\n\r\n            th {\r\n                padding-top: 12px;\r\n                padding-bottom: 12px;\r\n                text-align: left;\r\n                color: #444;\r\n                font-size: 14px;\r\n            }\r\n\r\n            td {\r\n                font-size: 14px;\r\n                color: #444;\r\n            }\r\n\r\n            th.star img,\r\n            td.star img {\r\n                width: 16px;\r\n            }\r\n\r\n            thead {\r\n                border-bottom: 1px solid #ddd;\r\n            }\r\n\r\n            tbody {\r\n                tr {\r\n                    border-bottom: 1px solid #ddd;\r\n                }\r\n\r\n                tr:nth-child(odd) {\r\n                    background-color: #f6f6f6;\r\n                }\r\n\r\n                tr:hover {\r\n                    background-color: #eee;\r\n                }\r\n\r\n                .img {\r\n                    span {\r\n                        width: 40px;\r\n                        height: 40px;\r\n                        display: block;\r\n\r\n                        img {\r\n                            max-width: 100%;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                .actions {\r\n\r\n                    .edit,\r\n                    .delete {\r\n                        border-radius: 4px;\r\n                        text-decoration: none;\r\n                        color: #fff;\r\n                        padding: 4px 8px;\r\n                        font-size: 13px;\r\n                        transition: all 0.3s ease 0s;\r\n                        -webkit-transition: all 0.3s ease 0s;\r\n                    }\r\n\r\n                    .edit {\r\n                        background-color: #5492bc;\r\n\r\n                        &:hover {\r\n                            background-color: #5da8da;\r\n                        }\r\n                    }\r\n\r\n                    .delete {\r\n                        background-color: #ca371a;\r\n                        margin-left: 4px;\r\n\r\n                        &:hover {\r\n                            background-color: #dc492c;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            tfoot {\r\n                th {\r\n                    border-bottom: 0px solid #ddd;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}