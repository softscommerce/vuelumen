{"ast":null,"code":"import OnClickOutside from \"./OnClickOutside.vue\";\nexport default {\n  components: {\n    OnClickOutside\n  },\n  props: [\"value\", \"options\", \"filterFunction\"],\n\n  data() {\n    return {\n      isOpen: false,\n      search: \"\",\n      highlightedIndex: 0\n    };\n  },\n\n  beforeDestroy() {// this.popper.destroy()\n  },\n\n  computed: {\n    filteredOptions() {\n      return this.filterFunction(this.search, this.options);\n    }\n\n  },\n  methods: {\n    open() {\n      if (this.isOpen) {\n        return;\n      }\n\n      this.isOpen = true;\n      this.$nextTick(() => {\n        // this.setupPopper()\n        this.$refs.search.focus();\n        this.scrollToHighlighted();\n      });\n    },\n\n    // setupPopper() {\n    // //   if (this.popper === undefined) {\n    // //     this.popper = new Popper(this.$refs.button, this.$refs.dropdown, {\n    // //       placement: \"bottom\"\n    // //     })\n    // //   } else {\n    // //     this.popper.scheduleUpdate()\n    // //   }\n    // },\n    close() {\n      if (!this.isOpen) {\n        return;\n      }\n\n      this.isOpen = false;\n      this.$refs.button.focus();\n    },\n\n    select(option) {\n      this.$emit(\"input\", option);\n      this.search = \"\";\n      this.highlightedIndex = 0;\n      this.close();\n    },\n\n    selectHighlighted() {\n      this.select(this.filteredOptions[this.highlightedIndex]);\n    },\n\n    scrollToHighlighted() {\n      this.$refs.options.children[this.highlightedIndex].scrollIntoView({\n        block: \"nearest\"\n      });\n    },\n\n    highlight(index) {\n      this.highlightedIndex = index;\n\n      if (this.highlightedIndex < 0) {\n        this.highlightedIndex = this.filteredOptions.length - 1;\n      }\n\n      if (this.highlightedIndex > this.filteredOptions.length - 1) {\n        this.highlightedIndex = 0;\n      }\n\n      this.scrollToHighlighted();\n    },\n\n    highlightPrev() {\n      this.highlight(this.highlightedIndex - 1);\n    },\n\n    highlightNext() {\n      this.highlight(this.highlightedIndex + 1);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA+CA,OAAOA,cAAP,MAA2B,sBAA3B;AAEA,eAAe;EACbC,UAAU,EAAE;IACVD;EADU,CADC;EAIbE,KAAK,EAAE,CAAC,OAAD,EAAU,SAAV,EAAqB,gBAArB,CAJM;;EAKbC,IAAI,GAAG;IACL,OAAO;MACLC,MAAM,EAAE,KADH;MAELC,MAAM,EAAE,EAFH;MAGLC,gBAAgB,EAAE;IAHb,CAAP;EAKD,CAXY;;EAYbC,aAAa,GAAG,CACd;EACD,CAdY;;EAebC,QAAQ,EAAE;IACRC,eAAe,GAAG;MAChB,OAAO,KAAKC,cAAL,CAAoB,KAAKL,MAAzB,EAAiC,KAAKM,OAAtC,CAAP;IACF;;EAHQ,CAfG;EAoBbC,OAAO,EAAE;IACPC,IAAI,GAAG;MACL,IAAI,KAAKT,MAAT,EAAiB;QACf;MACF;;MACA,KAAKA,MAAL,GAAc,IAAd;MACA,KAAKU,SAAL,CAAe,MAAM;QACnB;QACA,KAAKC,KAAL,CAAWV,MAAX,CAAkBW,KAAlB;QACA,KAAKC,mBAAL;MACD,CAJD;IAKD,CAXM;;IAYP;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC,KAAK,GAAG;MACN,IAAI,CAAC,KAAKd,MAAV,EAAkB;QAChB;MACF;;MACA,KAAKA,MAAL,GAAc,KAAd;MACA,KAAKW,KAAL,CAAWI,MAAX,CAAkBH,KAAlB;IACD,CA3BM;;IA4BPI,MAAM,CAACC,MAAD,EAAS;MACb,KAAKC,KAAL,CAAW,OAAX,EAAoBD,MAApB;MACA,KAAKhB,MAAL,GAAc,EAAd;MACA,KAAKC,gBAAL,GAAwB,CAAxB;MACA,KAAKY,KAAL;IACD,CAjCM;;IAkCPK,iBAAiB,GAAG;MAClB,KAAKH,MAAL,CAAY,KAAKX,eAAL,CAAqB,KAAKH,gBAA1B,CAAZ;IACD,CApCM;;IAqCPW,mBAAmB,GAAG;MACpB,KAAKF,KAAL,CAAWJ,OAAX,CAAmBa,QAAnB,CAA4B,KAAKlB,gBAAjC,EAAmDmB,cAAnD,CAAkE;QAChEC,KAAK,EAAE;MADyD,CAAlE;IAGD,CAzCM;;IA0CPC,SAAS,CAACC,KAAD,EAAQ;MACf,KAAKtB,gBAAL,GAAwBsB,KAAxB;;MAEA,IAAI,KAAKtB,gBAAL,GAAwB,CAA5B,EAA+B;QAC7B,KAAKA,gBAAL,GAAwB,KAAKG,eAAL,CAAqBoB,MAArB,GAA8B,CAAtD;MACF;;MAEA,IAAI,KAAKvB,gBAAL,GAAwB,KAAKG,eAAL,CAAqBoB,MAArB,GAA8B,CAA1D,EAA6D;QAC3D,KAAKvB,gBAAL,GAAwB,CAAxB;MACF;;MAEA,KAAKW,mBAAL;IACD,CAtDM;;IAuDPa,aAAa,GAAG;MACd,KAAKH,SAAL,CAAe,KAAKrB,gBAAL,GAAwB,CAAvC;IACD,CAzDM;;IA0DPyB,aAAa,GAAG;MACd,KAAKJ,SAAL,CAAe,KAAKrB,gBAAL,GAAwB,CAAvC;IACF;;EA5DO;AApBI,CAAf","names":["OnClickOutside","components","props","data","isOpen","search","highlightedIndex","beforeDestroy","computed","filteredOptions","filterFunction","options","methods","open","$nextTick","$refs","focus","scrollToHighlighted","close","button","select","option","$emit","selectHighlighted","children","scrollIntoView","block","highlight","index","length","highlightPrev","highlightNext"],"sourceRoot":"","sources":["F:\\softvue\\src\\layout\\base\\SearchSelect.vue"],"sourcesContent":["<template>\r\n  <on-click-outside :do=\"close\">\r\n    <div class=\"search-select\" :class=\"{ 'is-active': isOpen }\">\r\n      <button\r\n        ref=\"button\"\r\n        @click=\"open\"\r\n        type=\"button\"\r\n        class=\"search-select-input\"\r\n      >\r\n        <span v-if=\"value !== null\">{{ value }}</span>\r\n        <span v-else class=\"search-select-placeholder\">Soldier Select </span>\r\n      </button>\r\n      <div ref=\"dropdown\" v-show=\"isOpen\" class=\"search-select-dropdown\">\r\n        <input\r\n          class=\"search-select-search\"\r\n          v-model=\"search\"\r\n          ref=\"search\"\r\n          @keydown.esc=\"close\"\r\n          @keydown.up=\"highlightPrev\"\r\n          @keydown.down=\"highlightNext\"\r\n          @keydown.enter.prevent=\"selectHighlighted\"\r\n          @keydown.tab.prevent\r\n        />\r\n        <ul\r\n          ref=\"options\"\r\n          v-show=\"filteredOptions.length > 0\"\r\n          class=\"search-select-options\"\r\n        >\r\n          <li\r\n            class=\"search-select-option\"\r\n            v-for=\"(option, i) in filteredOptions\"\r\n            :key=\"option\"\r\n            @click=\"select(option)\"\r\n            :class=\"{ 'is-active': i === highlightedIndex }\"\r\n          >\r\n            {{ option }}\r\n          </li>\r\n        </ul>\r\n        <div v-show=\"filteredOptions.length === 0\" class=\"search-select-empty\">\r\n          No results found for \"{{ search }}\"\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </on-click-outside>\r\n</template>\r\n\r\n<script>\r\nimport OnClickOutside from \"./OnClickOutside.vue\"\r\n\r\nexport default {\r\n  components: {\r\n    OnClickOutside\r\n  },\r\n  props: [\"value\", \"options\", \"filterFunction\"],\r\n  data() {\r\n    return {\r\n      isOpen: false,\r\n      search: \"\",\r\n      highlightedIndex: 0\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // this.popper.destroy()\r\n  },\r\n  computed: {\r\n    filteredOptions() {\r\n      return this.filterFunction(this.search, this.options)\r\n    }\r\n  },\r\n  methods: {\r\n    open() {\r\n      if (this.isOpen) {\r\n        return\r\n      }\r\n      this.isOpen = true\r\n      this.$nextTick(() => {\r\n        // this.setupPopper()\r\n        this.$refs.search.focus()\r\n        this.scrollToHighlighted()\r\n      })\r\n    },\r\n    // setupPopper() {\r\n    // //   if (this.popper === undefined) {\r\n    // //     this.popper = new Popper(this.$refs.button, this.$refs.dropdown, {\r\n    // //       placement: \"bottom\"\r\n    // //     })\r\n    // //   } else {\r\n    // //     this.popper.scheduleUpdate()\r\n    // //   }\r\n    // },\r\n    close() {\r\n      if (!this.isOpen) {\r\n        return\r\n      }\r\n      this.isOpen = false\r\n      this.$refs.button.focus()\r\n    },\r\n    select(option) {\r\n      this.$emit(\"input\", option)\r\n      this.search = \"\"\r\n      this.highlightedIndex = 0\r\n      this.close()\r\n    },\r\n    selectHighlighted() {\r\n      this.select(this.filteredOptions[this.highlightedIndex])\r\n    },\r\n    scrollToHighlighted() {\r\n      this.$refs.options.children[this.highlightedIndex].scrollIntoView({\r\n        block: \"nearest\"\r\n      })\r\n    },\r\n    highlight(index) {\r\n      this.highlightedIndex = index\r\n\r\n      if (this.highlightedIndex < 0) {\r\n        this.highlightedIndex = this.filteredOptions.length - 1\r\n      }\r\n\r\n      if (this.highlightedIndex > this.filteredOptions.length - 1) {\r\n        this.highlightedIndex = 0\r\n      }\r\n\r\n      this.scrollToHighlighted()\r\n    },\r\n    highlightPrev() {\r\n      this.highlight(this.highlightedIndex - 1)\r\n    },\r\n    highlightNext() {\r\n      this.highlight(this.highlightedIndex + 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}