{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { ref } from 'vue';\nconst error = ref(null);\nconst f2 = ref('');\n\nconst Img = async event => {\n  error.value = null;\n\n  try {\n    var f = event.target.files[0];\n    var fileName = f.name.split('.')[0];\n    console.log(f.size);\n    var img = new Image();\n    console.log(img.src);\n    img.src = URL.createObjectURL(f);\n\n    if (f.size >= 100006) {\n      img.onload = function () {\n        var canvas = document.createElement('canvas');\n        canvas.width = img.width - 100;\n        canvas.height = img.height - 100;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        canvas.toBlob(function (blob) {\n          console.info(blob.size);\n          f2.value = new File([blob], fileName + \".webp\"); //   return f2;\n\n          console.log(f2.value);\n        }, 'image/webp', 0.00001);\n      };\n    } else {\n      img.onload = function () {\n        var canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        canvas.toBlob(function (blob) {\n          console.info(blob.size);\n          f2.value = new File([blob], fileName + \".webp\"); //   return f2\n\n          console.log(f2.value);\n        }, 'image/webp', 0.5);\n      };\n    }\n\n    if (!res) {\n      throw new Error('Image Not Found');\n    }\n\n    return f2;\n  } catch (err) {\n    console.log(err.message);\n    error.value = err.message;\n  }\n};\n\nconst Image = () => {\n  return {\n    error,\n    Img,\n    f2\n  };\n};\n\nexport default Image;","map":{"version":3,"names":["ref","error","f2","Img","event","value","f","target","files","fileName","name","split","console","log","size","img","Image","src","URL","createObjectURL","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toBlob","blob","info","File","res","Error","err","message"],"sources":["F:/softvue/src/Helpers/image.js"],"sourcesContent":["\r\nimport {ref} from 'vue';\r\nconst error = ref(null);\r\nconst f2 = ref('');\r\nconst Img = async (event) => {\r\n    error.value = null;\r\n    \r\n    try{\r\n            var f = event.target.files[0];\r\n                var fileName = f.name.split('.')[0];\r\n                console.log(f.size);\r\n                var img = new Image();\r\n                console.log(img.src);\r\n                img.src = URL.createObjectURL(f);\r\n                if(f.size >=  100006){\r\n                     img.onload = function(){\r\n                    var canvas = document.createElement('canvas');\r\n                    canvas.width = img.width - 100;\r\n                    canvas.height = img.height - 100;\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.drawImage(img, 0, 0);\r\n                    canvas.toBlob(function(blob){\r\n                            console.info(blob.size);\r\n                            f2.value = new File([blob], fileName + \".webp\");\r\n                    //   return f2;\r\n                    console.log(f2.value)\r\n                      \r\n                    }, 'image/webp', 0.00001);\r\n                }\r\n                }else{\r\n                     img.onload = function(){\r\n                    var canvas = document.createElement('canvas');\r\n                    canvas.width = img.width;\r\n                    canvas.height = img.height;\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.drawImage(img, 0, 0);\r\n                    canvas.toBlob(function(blob){\r\n                     console.info(blob.size);\r\n                      f2.value = new File([blob], fileName + \".webp\");\r\n                    //   return f2\r\n                    console.log(f2.value)\r\n                       \r\n                    }, 'image/webp', 0.5);\r\n                    }\r\n                }\r\n\r\n\r\n       if(!res){\r\n        throw new Error('Image Not Found');\r\n       }\r\n       return f2;\r\n    }catch(err){\r\n        console.log(err.message);\r\n        error.value = err.message;\r\n\r\n    }\r\n\r\n}\r\n\r\nconst Image = () => {\r\n    return {error, Img, f2};\r\n}\r\n\r\nexport default Image;"],"mappings":"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"},"metadata":{},"sourceType":"module"}