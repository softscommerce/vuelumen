{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios'; // import  Image  from '@/Helpers/image.js'\n\nimport brandApi from './composible/brand-api.js';\nimport { useStore } from 'vuex';\nimport { useRoute } from 'vue-router';\nexport default {\n  setup() {\n    const displayToCommunity = event => {\n      console.log(event);\n    };\n\n    const route = useRoute();\n    const store = useStore();\n    const brand_info = ref('');\n    const img_url = ref('');\n    const image = ref('');\n    const brand_description = ref('');\n    const brand_name = ref('');\n    onMounted(async () => {\n      const brandInfo = await brandApi.getInfo(route.params.id);\n      brand_info.value = brandInfo.data.data;\n      brand_name.value = brand_info.value.name;\n      brand_description.value = brand_info.value.description;\n      console.log(brand_info.value.name);\n    });\n\n    const ImgChange = event => {\n      img_url.value = URL.createObjectURL(event.target.files[0]);\n      var f = event.target.files[0];\n      var fileName = f.name.split('.')[0];\n      console.log(f.size);\n      var img = new Image();\n      img.src = URL.createObjectURL(f);\n\n      if (f.size >= 100006) {\n        img.onload = function () {\n          var canvas = document.createElement('canvas');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          var ctx = canvas.getContext('2d');\n          ctx.drawImage(img, 0, 0);\n          canvas.toBlob(function (blob) {\n            console.info(blob.size);\n            var f2 = new File([blob], fileName + \".webp\");\n            image.value = f2;\n            console.log(image.value);\n          }, 'image/webp', 0.00001);\n        };\n      } else {\n        img.onload = function () {\n          var canvas = document.createElement('canvas');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          var ctx = canvas.getContext('2d');\n          ctx.drawImage(img, 0, 0);\n          canvas.toBlob(function (blob) {\n            console.info(blob.size);\n            var f2 = new File([blob], fileName + \".webp\");\n            image.value = f2;\n            console.log(image.value);\n          }, 'image/webp', 0.5);\n        };\n      }\n    };\n\n    const brandFormSubmit = async () => {\n      const form = new FormData();\n      form.append(\"image\", image.value);\n      form.append(\"name\", brand_name.value);\n      form.append(\"description\", brand_description.value);\n      const brands = await brandApi.create(form);\n\n      if (brands.data.success) {\n        const payload = {\n          type: 'success',\n          message: brands.data.success\n        };\n        store.dispatch('addNotification', payload);\n      }\n    };\n\n    const ImgRemove = () => {\n      img_url.value = '';\n    };\n\n    return {\n      displayToCommunity,\n      img_url,\n      ImgChange,\n      ImgRemove,\n      image,\n      brandFormSubmit,\n      brand_description,\n      brand_name,\n      brand_info\n    };\n  },\n\n  data() {\n    return {\n      communities: []\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["ref","onMounted","axios","brandApi","useStore","useRoute","setup","displayToCommunity","event","console","log","route","store","brand_info","img_url","image","brand_description","brand_name","brandInfo","getInfo","params","id","value","data","name","description","ImgChange","URL","createObjectURL","target","files","f","fileName","split","size","img","Image","src","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toBlob","blob","info","f2","File","brandFormSubmit","form","FormData","append","brands","create","success","payload","type","message","dispatch","ImgRemove","communities"],"sourceRoot":"","sources":["F:\\softvue\\src\\modules\\admin\\view\\product\\page\\brand\\BrandEditPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"product_page\">\r\n        <div class=\"page_setup\">\r\n            <form class=\"form_data short\" @submit.prevent=\"brandFormSubmitEdit\" enctype=\"multipart-formdata\">\r\n                <h4 class=\"heading\">Add new Brand</h4>\r\n                <div class=\"mb_3\">\r\n                    <base-input label=\"Name\" v-model=\"brand_name\"  ></base-input>\r\n                </div>\r\n                \r\n                <div class=\"mb_3\">\r\n                    <base-textarea v-model=\"brand_description\" label=\"Description\" rowNum=\"6\" placeholder=\"description\" :modelValue=\"brand_info.description\"></base-textarea>\r\n                </div>\r\n                <div class=\"mb_3\">\r\n                    <div class=\"thumbnail\">\r\n                        <div class=\"img\">\r\n                            <!-- <div v-if=\"img_url != ''\" class=\"remove_btn\" @click=\"ImgRemove\">X</div> -->\r\n                            <img v-if=\"img_url == ''\" :src=\"brand_info.image\" alt=\"Thumbnail\">\r\n                            <img v-else :src=\"img_url\" alt=\"Thumbnail\">\r\n                        </div>\r\n                        <button type=\"button\" class=\"btn btn_border btn_sm\" @click=\"$refs.file.click()\">Upload/Add\r\n                            image</button>\r\n                        <input type=\"file\" ref=\"file\" class=\"d_none\" @change=\"ImgChange($event)\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"mb_3\">\r\n                    <base-button type=\"submit\">Add</base-button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport axios from 'axios';\r\n// import  Image  from '@/Helpers/image.js'\r\nimport brandApi from './composible/brand-api.js';\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n    setup() {\r\n        const displayToCommunity = (event) => {\r\n            console.log(event);\r\n        }\r\n\r\n      \r\n        const route = useRoute()\r\n        const store = useStore();\r\n        const brand_info = ref('');\r\n        const img_url = ref('');\r\n        const image = ref('');\r\n        const brand_description = ref('');\r\n        const brand_name  = ref('');\r\n\r\n          onMounted( async ()=>{\r\n            const brandInfo = await brandApi.getInfo(route.params.id);\r\n            brand_info.value =  brandInfo.data.data\r\n            brand_name.value = brand_info.value.name;\r\n            brand_description.value =  brand_info.value.description\r\n            console.log(brand_info.value.name)\r\n           \r\n        });\r\n\r\n\r\n        const ImgChange = (event) => {\r\n\r\n\r\n            img_url.value = URL.createObjectURL(event.target.files[0]);\r\n\r\n             var f = event.target.files[0];\r\n               \r\n                var fileName = f.name.split('.')[0];\r\n                console.log(f.size);\r\n                var img = new Image();\r\n                img.src = URL.createObjectURL(f);\r\n                if(f.size >=  100006){\r\n                     img.onload = function(){\r\n                    var canvas = document.createElement('canvas');\r\n                    canvas.width = img.width;\r\n                    canvas.height = img.height;\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.drawImage(img, 0, 0);\r\n                    canvas.toBlob(function(blob){\r\n                            console.info(blob.size);\r\n                            var f2 = new File([blob], fileName + \".webp\");\r\n                            image.value = f2;\r\n                            console.log(image.value);\r\n                       \r\n                    }, 'image/webp', 0.00001);\r\n                }\r\n                }else{\r\n                     img.onload = function(){\r\n                    var canvas = document.createElement('canvas');\r\n                    canvas.width = img.width;\r\n                    canvas.height = img.height;\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.drawImage(img, 0, 0);\r\n                    canvas.toBlob(function(blob){\r\n                            console.info(blob.size);\r\n                            var f2 = new File([blob], fileName + \".webp\");\r\n                       \r\n                            image.value = f2;\r\n                            console.log(image.value);\r\n                       \r\n                    }, 'image/webp', 0.5);\r\n                    }\r\n                }\r\n \r\n           \r\n        }\r\n\r\n        const brandFormSubmit =  async() =>{\r\n             const form =  new FormData();\r\n                form.append(\"image\", image.value);\r\n                form.append(\"name\", brand_name.value);\r\n                form.append(\"description\", brand_description.value);\r\n                 const brands = await brandApi.create(form);\r\n                 if(brands.data.success){\r\n                    const payload = {\r\n                        type: 'success',\r\n                        message: brands.data.success\r\n                    }\r\n                    store.dispatch('addNotification', payload)\r\n                 }\r\n\r\n               \r\n\r\n        }\r\n        const ImgRemove = () => {\r\n            img_url.value = '';\r\n        }\r\n\r\n        return { displayToCommunity, img_url, ImgChange, ImgRemove, image, brandFormSubmit, brand_description, brand_name, brand_info }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            communities: []\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n\r\n\r\n\r\n\r\n.d_none {\r\n    display: none;\r\n}\r\n.thumbnail {\r\n    display: flex;\r\n    align-items: start;\r\n    gap: 16px;\r\n    .img {\r\n        position: relative;\r\n        img {\r\n            width: 60px;\r\n            height: 60px;\r\n            box-shadow: 0 10px 19px rgb(0 0 0 / 15%);\r\n            border: 1px solid #ddd;\r\n            border-radius: 4px;\r\n        }\r\n        .remove_btn {\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            width: 20px;\r\n            height: 20px;\r\n            background-color: #fff;\r\n            border-radius: 50%;\r\n            padding: 6px;\r\n            font-size: 12px;\r\n            line-height: 10px;\r\n            color: #f01a1a;\r\n            cursor: pointer;\r\n            &:hover {\r\n                background-color: #222;\r\n                color: #fff;\r\n            }\r\n        }\r\n    }\r\n    button {\r\n        border: 1px solid #135e96;\r\n        color: #135e96;\r\n        padding: 0.25rem 0.5rem;\r\n        background-color: transparent;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n    }\r\n}\r\n.form_data {\r\n    h4.heading {\r\n        margin-bottom: 20px;\r\n        color: #666;\r\n    }\r\n}\r\nform.form_data.short {\r\n    max-width: 600px;\r\n    margin: auto;\r\n    box-shadow: 0 5px 16px rgb(0 0 0 / 15%);\r\n    padding: 20px;\r\n    margin-top: 20px;\r\n}\r\n\r\n.mb_1 {\r\n    margin-bottom: 4px;\r\n}\r\n.mb_2 {\r\n    margin-bottom: 8px;\r\n}\r\n.mb_3 {\r\n    margin-bottom: 12px;\r\n}\r\n.mb_4 {\r\n    margin-bottom: 16px;\r\n}\r\n.mb_5 {\r\n    margin-bottom: 20px;\r\n}\r\n.mb_6 {\r\n    margin-bottom: 24px;\r\n}\r\n.mb_7 {\r\n    margin-bottom: 28px;\r\n}\r\n.mb_8 {\r\n    margin-bottom: 32px;\r\n}\r\n.mt_1 {\r\n    margin-top: 4px;\r\n}\r\n.mt_2 {\r\n    margin-top: 8px;\r\n}\r\n.mt_3 {\r\n    margin-top: 12px;\r\n}\r\n.mt_4 {\r\n    margin-top: 16px;\r\n}\r\n.mt_5 {\r\n    margin-top: 20px;\r\n}\r\n.mt_6 {\r\n    margin-top: 24px;\r\n}\r\n.mt_7 {\r\n    margin-top: 28px;\r\n}\r\n.mt_8 {\r\n    margin-top: 32px;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n$phone-width-small: 360px;\r\n$phone-width: 575px;\r\n$tablet-width: 767px;\r\n$desktop-width: 1023px;\r\n\r\n@media (max-width: #{$desktop-width}) {}\r\n\r\n@media (max-width: #{$tablet-width}) {}\r\n\r\n@media (max-width: #{$phone-width}) {}\r\n\r\n@media (max-width: #{$phone-width-small}) {}\r\n</style>"]},"metadata":{},"sourceType":"module"}