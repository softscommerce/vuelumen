{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { ref, reactive, onMounted, watch } from 'vue';\nimport productApi from './composiable/archive-api.js';\nimport { useStore } from 'vuex';\nexport default {\n  setup() {\n    const store = useStore();\n    const search_data = ref([]);\n    const search_text = ref('');\n    const products_data = ref([]);\n    const select_value = ref([]);\n    const selected_all = ref(false);\n    const checked_add = ref(false);\n    const product_action = ref(-1); //filter section\n\n    const category_value = ref('');\n    const categories = ref([]);\n    const brands = ref([]);\n    const brand_value = ref(''); //filter section\n\n    const pages = ref([]);\n    const product_all_data = ref('');\n    const pageNumber = ref(0);\n    const page = reactive({\n      count: 1\n    }); //update product section\n\n    const unit = ref([]);\n    const minimum_sale = ref([]);\n    const stock = ref([]);\n    const price = ref([]);\n\n    const filterSubmit = async () => {\n      console.log(brand_value.value, category_value.value);\n      const form = new FormData();\n      form.append('brand_value', brand_value.value);\n      form.append('category_value', category_value.value);\n      const productUpdated = await productApi.getProductFilter(form);\n      products_data.value = productUpdated.data.data;\n    };\n\n    const productActionSubmit = async () => {\n      if (select_value.value.length > 0) {\n        const form = new FormData();\n\n        for (let i = 0; i < select_value.value.length; i++) {\n          console.log(unit.value[select_value.value[i]]);\n          form.append('id[]', select_value.value[i]);\n          form.append('unit[]', unit.value[select_value.value[i]]);\n          form.append('minimum_sale[]', minimum_sale.value[select_value.value[i]]);\n          form.append('stock[]', stock.value[select_value.value[i]]);\n          form.append('sale_price[]', price.value[select_value.value[i]]);\n        }\n\n        form.append('select_value', select_value.value);\n        form.append('product_action', product_action.value);\n        const productUpdated = await productApi.allProductUpdate(form);\n        const payload = {\n          type: productUpdated.data.type,\n          message: productUpdated.data.data\n        };\n        store.dispatch('addNotification', payload);\n      } else {\n        alert('Please Select one item');\n      }\n    };\n\n    const selectAll = () => {\n      select_value.value = [];\n\n      if (!selected_all.value) {\n        // Check all\n        for (var key in products_data.value) {\n          select_value.value.push(products_data.value[key]._id);\n          selected_all.value = true;\n        }\n      } else {\n        select_value.value = [];\n        selected_all.value = false;\n      }\n    };\n\n    watch(page, (newold, old) => {\n      getPaginateProduct(page.count);\n    });\n\n    const setPages = () => {\n      let numberOfPages = Math.ceil(product_all_data.value.length / 20);\n      setTimeout(() => {\n        for (let index = 1; index <= numberOfPages; index++) {\n          console.log('ok');\n          pages.value.push(index);\n          console.log(pages.value);\n        }\n      }, 100);\n    };\n\n    const updateCheckall = () => {\n      if (select_value.value.length == products_data.value.length) {\n        selected_all.value = true;\n      } else {\n        selected_all.value = false;\n      }\n\n      console.log(selected_all.value);\n    }; //update archive product \n\n\n    const updateArchiveProduct = id => {\n      const form = new FormData();\n      form.append('id', id);\n      form.append('unit', unit.value[id]);\n      form.append('minimum_sale', minimum_sale.value[id]);\n      form.append('stock', stock.value[id]);\n      form.append('sale_price', price.value[id]);\n      productApi.update(id, form);\n    };\n\n    const getPaginateProduct = async page => {\n      const products = await productApi.getAll(page);\n      products_data.value = products.data.data;\n    };\n\n    onMounted(async () => {\n      const productss = await productApi.getAllProduct();\n      product_all_data.value = productss.data;\n      product_all_data.value.forEach(item => {\n        price.value[item._id] = item.sale_price;\n        unit.value[item._id] = item.units;\n      });\n      const productcs = await productApi.getCategory();\n      categories.value = productcs.data.data;\n      ;\n      const productbs = await productApi.getBrand();\n      brands.value = productbs.data.data;\n      setPages();\n      getPaginateProduct();\n    });\n\n    const TableSearch = () => {\n      if (search_text.value.length > 0) {\n        return search_data.value = products_data.value.filter(item => {\n          return item.product_name.toLowerCase().includes(search_text.value.toLowerCase()) || item.category.name.toLowerCase().includes(search_text.value.toLowerCase()) || item.sale_price.toLowerCase().includes(search_text.value.toLowerCase());\n        });\n      } else {\n        return products_data.value;\n      }\n    };\n\n    return {\n      products_data,\n      search_data,\n      search_text,\n      TableSearch,\n      select_value,\n      selected_all,\n      selectAll,\n      checked_add,\n      product_action,\n      productActionSubmit,\n      updateCheckall,\n      setPages,\n      pages,\n      page,\n      pageNumber,\n      product_all_data,\n      getPaginateProduct,\n      updateArchiveProduct,\n      unit,\n      minimum_sale,\n      stock,\n      price,\n      categories,\n      category_value,\n      brands,\n      brand_value,\n      filterSubmit\n    };\n  }\n\n};","map":{"version":3,"mappings":";AAwHA,SAASA,GAAT,EAAcC,QAAd,EAAwBC,SAAxB,EAAmCC,KAAnC,QAAgD,KAAhD;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,eAAe;EAEXC,KAAK,GAAG;IACL,MAAMC,KAAI,GAAIF,QAAQ,EAAtB;IACC,MAAMG,WAAU,GAAIR,GAAG,CAAC,EAAD,CAAvB;IACA,MAAMS,WAAU,GAAIT,GAAG,CAAC,EAAD,CAAvB;IACA,MAAMU,aAAY,GAAIV,GAAG,CAAC,EAAD,CAAzB;IACA,MAAMW,YAAW,GAAIX,GAAG,CAAC,EAAD,CAAxB;IACA,MAAMY,YAAW,GAAIZ,GAAG,CAAC,KAAD,CAAxB;IACA,MAAMa,WAAU,GAAIb,GAAG,CAAC,KAAD,CAAvB;IACA,MAAMc,cAAa,GAAId,GAAG,CAAC,CAAC,CAAF,CAA1B,CARI,CAUJ;;IACA,MAAMe,cAAa,GAAIf,GAAG,CAAC,EAAD,CAA1B;IACA,MAAMgB,UAAS,GAAIhB,GAAG,CAAC,EAAD,CAAtB;IACA,MAAMiB,MAAK,GAAIjB,GAAG,CAAC,EAAD,CAAlB;IACA,MAAMkB,WAAU,GAAIlB,GAAG,CAAC,EAAD,CAAvB,CAdI,CAeJ;;IAEA,MAAMmB,KAAI,GAAInB,GAAG,CAAC,EAAD,CAAjB;IACA,MAAMoB,gBAAe,GAAIpB,GAAG,CAAC,EAAD,CAA5B;IACA,MAAMqB,UAAS,GAAIrB,GAAG,CAAC,CAAD,CAAtB;IACA,MAAMsB,IAAG,GAAIrB,QAAQ,CAAC;MAACsB,KAAK,EAAC;IAAP,CAAD,CAArB,CApBI,CAsBJ;;IACA,MAAMC,IAAG,GAAIxB,GAAG,CAAC,EAAD,CAAhB;IACA,MAAMyB,YAAW,GAAIzB,GAAG,CAAC,EAAD,CAAxB;IACA,MAAM0B,KAAI,GAAI1B,GAAG,CAAC,EAAD,CAAjB;IACA,MAAM2B,KAAI,GAAI3B,GAAG,CAAC,EAAD,CAAjB;;IAEA,MAAM4B,YAAW,GAAI,YAAU;MAC3BC,OAAO,CAACC,GAAR,CAAYZ,WAAW,CAACa,KAAxB,EAA+BhB,cAAc,CAACgB,KAA9C;MACA,MAAMC,IAAG,GAAI,IAAIC,QAAJ,EAAb;MACQD,IAAI,CAACE,MAAL,CAAY,aAAZ,EAA2BhB,WAAW,CAACa,KAAvC;MACAC,IAAI,CAACE,MAAL,CAAY,gBAAZ,EAA8BnB,cAAc,CAACgB,KAA7C;MACR,MAAMI,cAAa,GAAI,MAAM/B,UAAU,CAACgC,gBAAX,CAA4BJ,IAA5B,CAA7B;MACAtB,aAAa,CAACqB,KAAd,GAAsBI,cAAc,CAACE,IAAf,CAAoBA,IAA1C;IAEJ,CARA;;IAUA,MAAMC,mBAAkB,GAAI,YAAU;MAC9B,IAAG3B,YAAY,CAACoB,KAAb,CAAmBQ,MAAnB,GAA2B,CAA9B,EAAgC;QAC3B,MAAMP,IAAG,GAAI,IAAIC,QAAJ,EAAb;;QACD,KAAI,IAAIO,IAAI,CAAZ,EAAeA,IAAI7B,YAAY,CAACoB,KAAb,CAAmBQ,MAAtC,EAA8CC,CAAC,EAA/C,EAAkD;UAE9CX,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACO,KAAL,CAAWpB,YAAY,CAACoB,KAAb,CAAmBS,CAAnB,CAAX,CAAZ;UACAR,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBvB,YAAY,CAACoB,KAAb,CAAmBS,CAAnB,CAApB;UACAR,IAAI,CAACE,MAAL,CAAY,QAAZ,EAAuBV,IAAI,CAACO,KAAL,CAAWpB,YAAY,CAACoB,KAAb,CAAmBS,CAAnB,CAAX,CAAvB;UACAR,IAAI,CAACE,MAAL,CAAY,gBAAZ,EAA+BT,YAAY,CAACM,KAAb,CAAmBpB,YAAY,CAACoB,KAAb,CAAmBS,CAAnB,CAAnB,CAA/B;UACAR,IAAI,CAACE,MAAL,CAAY,SAAZ,EAAwBR,KAAK,CAACK,KAAN,CAAYpB,YAAY,CAACoB,KAAb,CAAmBS,CAAnB,CAAZ,CAAxB;UACAR,IAAI,CAACE,MAAL,CAAY,cAAZ,EAA6BP,KAAK,CAACI,KAAN,CAAYpB,YAAY,CAACoB,KAAb,CAAmBS,CAAnB,CAAZ,CAA7B;QAEJ;;QACCR,IAAI,CAACE,MAAL,CAAY,cAAZ,EAA4BvB,YAAY,CAACoB,KAAzC;QACAC,IAAI,CAACE,MAAL,CAAY,gBAAZ,EAA8BpB,cAAc,CAACiB,KAA7C;QACC,MAAMI,cAAa,GAAI,MAAM/B,UAAU,CAACqC,gBAAX,CAA4BT,IAA5B,CAA7B;QACE,MAAMU,OAAM,GAAI;UAChBC,IAAI,EAAER,cAAc,CAACE,IAAf,CAAoBM,IADV;UAEhBC,OAAO,EAAET,cAAc,CAACE,IAAf,CAAoBA;QAFb,CAAhB;QAIA9B,KAAK,CAACsC,QAAN,CAAe,iBAAf,EAAkCH,OAAlC;MAEP,CArBD,MAqBK;QACDI,KAAK,CAAC,wBAAD,CAAL;MACJ;IAER,CA1BA;;IA+BA,MAAMC,SAAQ,GAAI,MAAK;MACnBpC,YAAY,CAACoB,KAAb,GAAqB,EAArB;;MACA,IAAG,CAACnB,YAAY,CAACmB,KAAjB,EAAuB;QAAE;QACrB,KAAK,IAAIiB,GAAT,IAAgBtC,aAAa,CAACqB,KAA9B,EAAqC;UACrCpB,YAAY,CAACoB,KAAb,CAAmBkB,IAAnB,CAAyBvC,aAAa,CAACqB,KAAd,CAAoBiB,GAApB,EAAyBE,GAAlD;UACAtC,YAAY,CAACmB,KAAb,GAAqB,IAArB;QACA;MACC,CALL,MAKS;QACDpB,YAAY,CAACoB,KAAb,GAAqB,EAArB;QACAnB,YAAY,CAACmB,KAAb,GAAqB,KAArB;MACJ;IACR,CAXA;;IAaA5B,KAAK,CAACmB,IAAD,EAAO,CAAC6B,MAAD,EAASC,GAAT,KAAiB;MACzBC,kBAAkB,CAAC/B,IAAI,CAACC,KAAN,CAAlB;IACA,CAFC,CAAL;;IAIA,MAAM+B,QAAO,GAAI,MAAM;MAC5B,IAAIC,aAAY,GAAIC,IAAI,CAACC,IAAL,CAAWrC,gBAAgB,CAACW,KAAjB,CAAuBQ,MAAvB,GAAgC,EAA3C,CAApB;MACSmB,UAAU,CAAC,MAAM;QACb,KAAK,IAAIC,KAAI,GAAI,CAAjB,EAAoBA,KAAI,IAAKJ,aAA7B,EAA4CI,KAAK,EAAjD,EAAqD;UACrD9B,OAAO,CAACC,GAAR,CAAY,IAAZ;UACZX,KAAK,CAACY,KAAN,CAAYkB,IAAZ,CAAiBU,KAAjB;UACY9B,OAAO,CAACC,GAAR,CAAYX,KAAK,CAACY,KAAlB;QACb;MACU,CANS,EAMP,GANO,CAAV;IASV,CAXM;;IAeD,MAAM6B,cAAa,GAAI,MAAK;MAEvB,IAAGjD,YAAY,CAACoB,KAAb,CAAmBQ,MAAnB,IAA6B7B,aAAa,CAACqB,KAAd,CAAoBQ,MAApD,EAA2D;QACxD3B,YAAY,CAACmB,KAAb,GAAqB,IAArB;MACF,CAFD,MAEK;QACDnB,YAAY,CAACmB,KAAb,GAAqB,KAArB;MACJ;;MAECF,OAAO,CAACC,GAAR,CAAalB,YAAY,CAACmB,KAA1B;IACD,CATL,CArGK,CAgHZ;;;IAEQ,MAAM8B,oBAAmB,GAAKC,EAAD,IAAO;MAE/B,MAAM9B,IAAG,GAAI,IAAIC,QAAJ,EAAb;MACDD,IAAI,CAACE,MAAL,CAAY,IAAZ,EAAkB4B,EAAlB;MACA9B,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAqBV,IAAI,CAACO,KAAL,CAAW+B,EAAX,CAArB;MACA9B,IAAI,CAACE,MAAL,CAAY,cAAZ,EAA6BT,YAAY,CAACM,KAAb,CAAmB+B,EAAnB,CAA7B;MACA9B,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAsBR,KAAK,CAACK,KAAN,CAAY+B,EAAZ,CAAtB;MACA9B,IAAI,CAACE,MAAL,CAAY,YAAZ,EAA2BP,KAAK,CAACI,KAAN,CAAY+B,EAAZ,CAA3B;MAEA1D,UAAU,CAAC2D,MAAX,CAAkBD,EAAlB,EAAsB9B,IAAtB;IAGJ,CAZA;;IAiBJ,MAAMqB,kBAAiB,GAAI,MAAM/B,IAAN,IAAe;MACrC,MAAM0C,QAAO,GAAK,MAAM5D,UAAU,CAAC6D,MAAX,CAAkB3C,IAAlB,CAAxB;MACIZ,aAAa,CAACqB,KAAd,GAAuBiC,QAAQ,CAAC3B,IAAT,CAAcA,IAArC;IACD,CAHR;;IAIInC,SAAS,CAAC,YAAS;MAEhB,MAAMgE,SAAQ,GAAK,MAAM9D,UAAU,CAAC+D,aAAX,EAAzB;MACC/C,gBAAgB,CAACW,KAAjB,GAAyBmC,SAAS,CAAC7B,IAAnC;MAEAjB,gBAAgB,CAACW,KAAjB,CAAuBqC,OAAvB,CAA+BC,IAAG,IAAI;QAClC1C,KAAK,CAACI,KAAN,CAAYsC,IAAI,CAACnB,GAAjB,IAAwBmB,IAAI,CAACC,UAA7B;QACA9C,IAAI,CAACO,KAAL,CAAWsC,IAAI,CAACnB,GAAhB,IAAuBmB,IAAI,CAACE,KAA5B;MACH,CAHD;MAMG,MAAMC,SAAQ,GAAK,MAAMpE,UAAU,CAACqE,WAAX,EAAzB;MACCzD,UAAU,CAACe,KAAX,GAAmByC,SAAS,CAACnC,IAAV,CAAeA,IAAlC;MAAuC;MAEvC,MAAMqC,SAAQ,GAAK,MAAMtE,UAAU,CAACuE,QAAX,EAAzB;MACA1D,MAAM,CAACc,KAAP,GAAe2C,SAAS,CAACrC,IAAV,CAAeA,IAA9B;MAEJiB,QAAQ;MACRD,kBAAkB;IAErB,CApBQ,CAAT;;IAuBA,MAAMuB,WAAU,GAAI,MAAM;MACtB,IAAInE,WAAW,CAACsB,KAAZ,CAAkBQ,MAAlB,GAA2B,CAA/B,EAAkC;QAC9B,OAAO/B,WAAW,CAACuB,KAAZ,GAAoBrB,aAAa,CAACqB,KAAd,CAAoB8C,MAApB,CAA2BR,IAAG,IAAK;UAC1D,OACIA,IAAI,CAACS,YAAL,CAAkBC,WAAlB,GAAgCC,QAAhC,CAAyCvE,WAAW,CAACsB,KAAZ,CAAkBgD,WAAlB,EAAzC,KACAV,IAAI,CAACY,QAAL,CAAcC,IAAd,CAAmBH,WAAnB,GAAiCC,QAAjC,CAA0CvE,WAAW,CAACsB,KAAZ,CAAkBgD,WAAlB,EAA1C,CADA,IAEAV,IAAI,CAACC,UAAL,CAAgBS,WAAhB,GAA8BC,QAA9B,CAAuCvE,WAAW,CAACsB,KAAZ,CAAkBgD,WAAlB,EAAvC,CAHJ;QAKH,CAN0B,CAA3B;MAOJ,CARA,MAQO;QACH,OAAOrE,aAAa,CAACqB,KAArB;MACJ;IAEJ,CAbA;;IAeA,OAAO;MACHrB,aADG;MAEHF,WAFG;MAGHC,WAHG;MAIHmE,WAJG;MAKHjE,YALG;MAMHC,YANG;MAOHmC,SAPG;MAQHlC,WARG;MASHC,cATG;MAUHwB,mBAVG;MAWHsB,cAXG;MAYHN,QAZG;MAaHnC,KAbG;MAcHG,IAdG;MAeHD,UAfG;MAgBHD,gBAhBG;MAiBHiC,kBAjBG;MAkBHQ,oBAlBG;MAmBHrC,IAnBG;MAoBHC,YApBG;MAqBHC,KArBG;MAsBHC,KAtBG;MAuBHX,UAvBG;MAwBHD,cAxBG;MAyBHE,MAzBG;MA0BHC,WA1BG;MA2BHU;IA3BG,CAAP;EA6BH;;AA5MU,CAAf","names":["ref","reactive","onMounted","watch","productApi","useStore","setup","store","search_data","search_text","products_data","select_value","selected_all","checked_add","product_action","category_value","categories","brands","brand_value","pages","product_all_data","pageNumber","page","count","unit","minimum_sale","stock","price","filterSubmit","console","log","value","form","FormData","append","productUpdated","getProductFilter","data","productActionSubmit","length","i","allProductUpdate","payload","type","message","dispatch","alert","selectAll","key","push","_id","newold","old","getPaginateProduct","setPages","numberOfPages","Math","ceil","setTimeout","index","updateCheckall","updateArchiveProduct","id","update","products","getAll","productss","getAllProduct","forEach","item","sale_price","units","productcs","getCategory","productbs","getBrand","TableSearch","filter","product_name","toLowerCase","includes","category","name"],"sourceRoot":"","sources":["F:\\xampp\\htdocs\\softcode\\softvue\\src\\modules\\user\\view\\product\\archive\\ArchiveProductList.vue"],"sourcesContent":["<template>\r\n    <div class=\"users\">\r\n        <div class=\"lists\">\r\n            <div class=\"table_filter\">\r\n                <div class=\"actions\">\r\n                    <form @submit.prevent=\"productActionSubmit\">\r\n                        <select class=\"form_select\" v-model=\"product_action\" aria-label=\"Default select example\">\r\n                            <option value=\"-1\">Bulk Actions</option>\r\n                            <option value=\"update\">Upload</option>\r\n                        </select>\r\n                        <button type=\"submit\" class=\"btn btn_border btn_sm\">Apply</button>\r\n                    </form>\r\n\r\n                    <form @submit.prevent=\"filterSubmit\">\r\n                        <select class=\"form_select\" v-model=\"brand_value\" aria-label=\"Default select example\">\r\n                            <option value=\"\">Brand</option>\r\n                            <option v-for=\"brand in brands\" :key=\"brand._id\" :value=\"brand._id\">{{brand.name}}</option>\r\n                        </select>\r\n                        <select class=\"form_select\" v-model=\"category_value\" aria-label=\"Default select example\">\r\n                            <option value=\"\">Category</option>\r\n                            <option v-for=\"cats in categories\" :key=\"cats._id\" :value=\"cats._id\">{{cats.name}}</option>\r\n                            \r\n                        </select>\r\n\r\n                        \r\n                        <button type=\"submit\" class=\"btn btn_border btn_sm\">Filter</button>\r\n                    </form>\r\n\r\n\r\n                </div>\r\n                <div class=\"paginations\">\r\n                    <div class=\"data_view\">\r\n                        <div class=\"search\">\r\n                            <!--<form class=\"\">-->\r\n                            <input type=\"text\" class=\"form-control\" @keyup=\"TableSearch\" v-model=\"search_text\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row_count\">{{products_data.length}} items</div>\r\n\r\n                    <div class=\"page\" v-if=\"pages\">\r\n                        <ul class=\"pagination\">\r\n                            <li class=\"page-item\">\r\n                                <button type=\"button\" class=\"page-link\" v-if=\"page.count != 1\" @click=\"page.count--\" > Previous </button>\r\n                            </li>\r\n                            <li class=\"page-item\">\r\n                                \r\n                                <button type=\"button\" class=\"page-link\" v-for=\"pageNumber in pages.slice(page.count-1, page.count+5)\" :key=\"pageNumber\" @click=\"[page.count = pageNumber]\"> {{pageNumber}} </button>\r\n                            </li>\r\n                            <li class=\"page-item\">\r\n                                <button type=\"button\" @click=\"page.count++\" v-if=\"page.count < pages.length\" class=\"page-link\"> Next </button>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"table_responsive\">\r\n                <table class=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style=\"width:5%\">\r\n                                <input type='checkbox' @click=\"selectAll\" v-model=\"selected_all\"> Check All\r\n                            </th>\r\n                            <th style=\"width:10%\">Image</th>\r\n                            <th style=\"width:27%\">Name</th>\r\n                            <th style=\"width:12%\">Price</th>\r\n                            <th style=\"width:12%\">Unit</th>\r\n                            <th style=\"width:12%\">Minimum Sell</th>\r\n                            <th style=\"width:12%\">Stock</th>\r\n                            <th style=\"width:10%\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody v-if=\"search_text != ''\">\r\n                        <tr v-if=\"search_data == ''\">\r\n                            <td colspan=\"6\">Search Not Found!</td>\r\n                        </tr>\r\n                        <tr v-else v-for=\"(data, index) in search_data\" :key=\"index\">\r\n                            <td class=\"checkbox\">\r\n                                <input type='checkbox' v-bind:value='data._id' v-model='select_value' @change='updateCheckall'>\r\n                            </td>\r\n                            <td class=\"img\">\r\n                                <span><img :src=\"data.feature_image\" alt=\"Image\"></span>\r\n                            </td>\r\n                            <td>{{ data.product_name }}</td>\r\n                            <td> <base-input v-model=\"price[data._id]\" :modelValue=\"data.sale_price\" placeholder=\"Sale Price\"></base-input></td>\r\n                            <td><base-input v-model=\"unit[data._id]\" placeholder=\"unit\"></base-input></td>\r\n                            <td><base-input v-model=\"minimum_sale[data._id]\"  placeholder=\"Minimum Sale\"></base-input></td>\r\n                            <td><base-input v-model=\"stock[data._id]\" placeholder=\"Stock\"></base-input></td>\r\n                            <td class=\"actions\">\r\n                                <router-link to=\"#\"  @click=\"updateArchiveProduct(data._id)\" class=\"edit\">Update</router-link>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody v-else>\r\n                        <tr v-for=\"(data, index) in products_data\" :key=\"index\">\r\n                            <td class=\"checkbox\">\r\n                                <input type='checkbox' v-bind:value='data._id' v-model='select_value' @change='updateCheckall'>\r\n                            </td>\r\n                            <td class=\"img\">\r\n                                <span><img :src=\"data.feature_image\" alt=\"Image\"></span>\r\n                            </td>\r\n                            <td>{{ data.product_name }}</td>\r\n                            <td><base-input v-model=\"price[data._id]\" :modelValue=\"data.sale_price\" placeholder=\"Sale Price\"></base-input></td>\r\n                             <td><base-input v-model=\"unit[data._id]\" placeholder=\"unit\"></base-input></td>\r\n                            <td><base-input v-model=\"minimum_sale[data._id]\"  placeholder=\"Minimum Sale\"></base-input></td>\r\n                            <td><base-input v-model=\"stock[data._id]\" placeholder=\"Stock\"></base-input></td>\r\n                            <td class=\"actions\">\r\n                                <router-link to=\"#\" @click=\"updateArchiveProduct(data._id)\" class=\"edit\">Update</router-link>\r\n                               \r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, watch } from 'vue';\r\nimport productApi from './composiable/archive-api.js';\r\nimport { useStore } from 'vuex'\r\nexport default {\r\n\r\n    setup() {\r\n       const store = useStore();\r\n        const search_data = ref([]);\r\n        const search_text = ref('');\r\n        const products_data = ref([]);\r\n        const select_value = ref([]);\r\n        const selected_all = ref(false);\r\n        const checked_add = ref(false);\r\n        const product_action = ref(-1);\r\n\r\n        //filter section\r\n        const category_value = ref('');\r\n        const categories = ref([]);\r\n        const brands = ref([]);\r\n        const brand_value = ref('');\r\n        //filter section\r\n       \r\n        const pages = ref([]);\r\n        const product_all_data = ref('');\r\n        const pageNumber = ref(0);\r\n        const page = reactive({count:1});\r\n\r\n        //update product section\r\n        const unit = ref([]);\r\n        const minimum_sale = ref([]);\r\n        const stock = ref([]);\r\n        const price = ref([]);\r\n\r\n        const filterSubmit = async() =>{\r\n            console.log(brand_value.value, category_value.value);\r\n            const form = new FormData();\r\n                    form.append('brand_value', brand_value.value);\r\n                    form.append('category_value', category_value.value);\r\n            const productUpdated = await productApi.getProductFilter(form);\r\n            products_data.value = productUpdated.data.data;\r\n\r\n        }\r\n\r\n        const productActionSubmit = async() =>{\r\n                if(select_value.value.length> 0){\r\n                     const form = new FormData();\r\n                    for(let i = 0; i < select_value.value.length; i++){\r\n\r\n                        console.log(unit.value[select_value.value[i]])\r\n                        form.append('id[]', select_value.value[i]);\r\n                        form.append('unit[]',  unit.value[select_value.value[i]]);\r\n                        form.append('minimum_sale[]',  minimum_sale.value[select_value.value[i]]);\r\n                        form.append('stock[]',  stock.value[select_value.value[i]]);\r\n                        form.append('sale_price[]',  price.value[select_value.value[i]]);\r\n\r\n                    }\r\n                     form.append('select_value', select_value.value);\r\n                     form.append('product_action', product_action.value);\r\n                      const productUpdated = await productApi.allProductUpdate(form);\r\n                        const payload = {\r\n                        type: productUpdated.data.type,\r\n                        message: productUpdated.data.data\r\n                        };\r\n                        store.dispatch('addNotification', payload);\r\n\r\n                }else{\r\n                    alert('Please Select one item');\r\n                }\r\n\r\n        } \r\n\r\n\r\n\r\n\r\n        const selectAll = () =>{\r\n            select_value.value = [];\r\n            if(!selected_all.value){ // Check all\r\n                for (var key in products_data.value) {\r\n                select_value.value.push( products_data.value[key]._id);\r\n                selected_all.value = true;\r\n                }\r\n                }else{\r\n                    select_value.value = [];\r\n                    selected_all.value = false;\r\n                }\r\n        }\r\n\r\n        watch(page, (newold, old) => { \r\n            getPaginateProduct(page.count);\r\n           });\r\n\r\n        const setPages = () => {\r\n\t\t\tlet numberOfPages = Math.ceil( product_all_data.value.length / 20);\r\n            setTimeout(() => {\r\n                for (let index = 1; index <= numberOfPages; index++) {\r\n                console.log('ok')\r\n\t\t\t\tpages.value.push(index);\r\n                console.log(pages.value);\r\n\t\t\t}\r\n            }, 100);\r\n\r\n\t\t\t\r\n\t\t}\r\n\r\n      \r\n\r\n       const updateCheckall = () =>{\r\n       \r\n            if(select_value.value.length == products_data.value.length){\r\n               selected_all.value = true;\r\n            }else{\r\n                selected_all.value = false;\r\n            }\r\n\r\n             console.log( selected_all.value)\r\n            }\r\n\r\n//update archive product \r\n\r\n        const updateArchiveProduct = (id) =>{\r\n\r\n             const form = new FormData();\r\n            form.append('id', id);\r\n            form.append('unit',  unit.value[id]);\r\n            form.append('minimum_sale',  minimum_sale.value[id]);\r\n            form.append('stock',  stock.value[id]);\r\n            form.append('sale_price',  price.value[id]);\r\n\r\n            productApi.update(id, form);\r\n\r\n\r\n        }\r\n\r\n       \r\n        \r\n      \r\n    const getPaginateProduct = async(page) => {\r\n         const products =  await productApi.getAll(page);\r\n             products_data.value =  products.data.data;\r\n            }\r\n        onMounted(async()=>{\r\n          \r\n           const productss =  await productApi.getAllProduct();\r\n            product_all_data.value = productss.data;\r\n\r\n            product_all_data.value.forEach(item =>{\r\n                price.value[item._id] = item.sale_price;\r\n                unit.value[item._id] = item.units;\r\n            });\r\n\r\n\r\n               const productcs =  await productApi.getCategory();\r\n                categories.value = productcs.data.data;;\r\n\r\n                const productbs =  await productApi.getBrand();\r\n                brands.value = productbs.data.data;\r\n\r\n            setPages();\r\n            getPaginateProduct();\r\n           \r\n        });\r\n\r\n\r\n        const TableSearch = () => {\r\n            if (search_text.value.length > 0) {\r\n                return search_data.value = products_data.value.filter(item => {\r\n                    return (\r\n                        item.product_name.toLowerCase().includes(search_text.value.toLowerCase())||\r\n                        item.category.name.toLowerCase().includes(search_text.value.toLowerCase())||\r\n                        item.sale_price.toLowerCase().includes(search_text.value.toLowerCase())\r\n                    );\r\n                });\r\n            } else {\r\n                return products_data.value;\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            products_data,\r\n            search_data,\r\n            search_text,\r\n            TableSearch,\r\n            select_value,\r\n            selected_all,\r\n            selectAll,\r\n            checked_add,\r\n            product_action,\r\n            productActionSubmit,\r\n            updateCheckall,\r\n            setPages,\r\n            pages,\r\n            page,\r\n            pageNumber,\r\n            product_all_data,\r\n            getPaginateProduct,\r\n            updateArchiveProduct,\r\n            unit,\r\n            minimum_sale,\r\n            stock,\r\n            price,\r\n            categories,\r\n            category_value,\r\n            brands,\r\n            brand_value,\r\n            filterSubmit\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.paginations,\r\n.pagination{\r\n    list-style: none;\r\n}\r\n\r\nbutton.page-link {\r\n\tdisplay: inline-block;\r\n    padding: 5px 10px;\r\n    cursor: pointer;\r\n    border: none;\r\n    outline: none;\r\n}\r\nbutton.page-link {\r\n    font-size: 20px;\r\n    color: #29b3ed;\r\n    font-weight: 500;\r\n}\r\n\r\n.lists {\r\n    .heading {\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        color: #444;\r\n        margin-bottom: 10px;\r\n        .btn_border {\r\n            border: none;\r\n            outline: none;\r\n            background-color: transparent;\r\n            a {\r\n                font-weight: 600;\r\n                border: 1px solid #5492bc;\r\n                color: #5492bc;\r\n                padding: 6px 12px;\r\n                margin-left: 8px;\r\n                border-radius: 4px;\r\n                cursor: pointer;\r\n                text-decoration: none;\r\n            }\r\n        }\r\n    }\r\n\r\n    .data_view {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-wrap: wrap;\r\n        row-gap: 12px;\r\n\r\n        .items {\r\n            display: flex;\r\n            list-style: none;\r\n\r\n            .item {\r\n                .link {\r\n                    color: #5492bc;\r\n                    font-size: 14px;\r\n                    margin: 0 4px;\r\n                    cursor: pointer;\r\n                }\r\n            }\r\n        }\r\n\r\n        .search {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            row-gap: 12px;\r\n\r\n            form {\r\n                display: flex;\r\n                flex-wrap: wrap;\r\n                row-gap: 12px;\r\n            }\r\n\r\n            input {\r\n                width: 200px;\r\n                outline: none;\r\n                border: 1px solid #ddd;\r\n                border-radius: 4px;\r\n                padding: 8px;\r\n            }\r\n\r\n            button {\r\n                border: none;\r\n                outline: none;\r\n                background-color: transparent;\r\n                border: 1px solid #5492bc;\r\n                color: #5492bc;\r\n                padding: 8px 16px;\r\n                margin-left: 8px;\r\n                border-radius: 4px;\r\n                cursor: pointer;\r\n            }\r\n        }\r\n    }\r\n\r\n    .table_filter {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-wrap: wrap;\r\n        row-gap: 12px;\r\n\r\n        .actions {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            row-gap: 12px;\r\n            column-gap: 12px;\r\n\r\n            form {\r\n                display: flex;\r\n                flex-wrap: wrap;\r\n                row-gap: 12px;\r\n                column-gap: 12px;\r\n\r\n                .form_select {\r\n                    width: auto;\r\n                    outline: none;\r\n                    border: 1px solid #ddd;\r\n                    border-radius: 4px;\r\n                    padding: 8px;\r\n                }\r\n\r\n                button {\r\n                    border: none;\r\n                    outline: none;\r\n                    background-color: transparent;\r\n                    border: 1px solid #5492bc;\r\n                    color: #5492bc;\r\n                    padding: 8px 16px;\r\n                    margin-left: 8px;\r\n                    border-radius: 4px;\r\n                    cursor: pointer;\r\n                }\r\n            }\r\n        }\r\n\r\n        .paginations,\r\n        .pagination {\r\n            display: flex;\r\n            gap: 20px;\r\n            align-items: center;\r\n\r\n            .row_count {\r\n                font-size: 14px;\r\n                color: #444;\r\n            }\r\n\r\n            .page {\r\n                border: 1px solid #ddd;\r\n                border-radius: 4px;\r\n                overflow: hidden;\r\n\r\n                .link {\r\n                    border-right: 1px solid #ddd;\r\n                    text-decoration: none;\r\n                    padding: 4px 8px;\r\n                    display: inline-block;\r\n                    font-size: 13px;\r\n                    cursor: pointer;\r\n                    transition: all 0.3s ease 0s;\r\n                    -webkit-transition: all 0.3s ease 0s;\r\n\r\n                    &:last-child {\r\n                        border-right: 0px solid #ddd;\r\n                    }\r\n\r\n                    &:hover {\r\n                        background-color: #5492bc;\r\n                        color: #fff;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .table_responsive {\r\n        width: 100%;\r\n        overflow-x: auto;\r\n        border: 1px solid #ddd;\r\n        margin: 12px 0;\r\n\r\n        .table {\r\n            font-family: Arial, Helvetica, sans-serif;\r\n            border-collapse: collapse;\r\n            width: 100%;\r\n\r\n            td,\r\n            th {\r\n                padding: 12px 8px;\r\n            }\r\n\r\n            th {\r\n                padding-top: 12px;\r\n                padding-bottom: 12px;\r\n                text-align: left;\r\n                color: #444;\r\n                font-size: 14px;\r\n            }\r\n\r\n            td {\r\n                font-size: 14px;\r\n                color: #444;\r\n            }\r\n\r\n            thead {\r\n                border-bottom: 1px solid #ddd;\r\n            }\r\n\r\n            tbody {\r\n                tr {\r\n                    border-bottom: 1px solid #ddd;\r\n                }\r\n\r\n                tr:nth-child(odd) {\r\n                    background-color: #f6f6f6;\r\n                }\r\n\r\n                tr:hover {\r\n                    background-color: #eee;\r\n                }\r\n\r\n                .img {\r\n                    span {\r\n                        width: 40px;\r\n                        height: 40px;\r\n                        display: block;\r\n\r\n                        img {\r\n                            max-width: 100%;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                .actions {\r\n\r\n                    .edit,\r\n                    .delete {\r\n                        border-radius: 4px;\r\n                        text-decoration: none;\r\n                        color: #fff;\r\n                        padding: 4px 8px;\r\n                        font-size: 13px;\r\n                        transition: all 0.3s ease 0s;\r\n                        -webkit-transition: all 0.3s ease 0s;\r\n                    }\r\n\r\n                    .edit {\r\n                        background-color: #5492bc;\r\n\r\n                        &:hover {\r\n                            background-color: #5da8da;\r\n                        }\r\n                    }\r\n\r\n                    .delete {\r\n                        background-color: #ca371a;\r\n                        margin-left: 4px;\r\n\r\n                        &:hover {\r\n                            background-color: #dc492c;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            tfoot {\r\n                th {\r\n                    border-bottom: 0px solid #ddd;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}