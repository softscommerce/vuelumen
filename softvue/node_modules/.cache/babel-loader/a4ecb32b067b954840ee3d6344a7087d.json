{"ast":null,"code":"import { ref } from 'vue';\nimport axios from 'axios'; // import  Image  from '@/Helpers/image.js'\n\nimport brand from './composible/brand-api.js';\nimport { useStore } from 'vuex';\nimport { useRoute } from 'vue-router';\nexport default {\n  setup() {\n    const displayToCommunity = event => {\n      console.log(event);\n    };\n\n    const route = useRoute();\n    const store = useStore();\n    const img_url = ref('');\n    const image = ref('');\n    const brand_description = ref('');\n    const brand_name = ref('');\n\n    const ImgChange = event => {\n      img_url.value = URL.createObjectURL(event.target.files[0]);\n      var f = event.target.files[0];\n      var fileName = f.name.split('.')[0];\n      console.log(f.size);\n      var img = new Image();\n      img.src = URL.createObjectURL(f);\n\n      if (f.size >= 100006) {\n        img.onload = function () {\n          var canvas = document.createElement('canvas');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          var ctx = canvas.getContext('2d');\n          ctx.drawImage(img, 0, 0);\n          canvas.toBlob(function (blob) {\n            console.info(blob.size);\n            var f2 = new File([blob], fileName + \".webp\");\n            image.value = f2;\n            console.log(image.value);\n          }, 'image/webp', 0.00001);\n        };\n      } else {\n        img.onload = function () {\n          var canvas = document.createElement('canvas');\n          canvas.width = img.width;\n          canvas.height = img.height;\n          var ctx = canvas.getContext('2d');\n          ctx.drawImage(img, 0, 0);\n          canvas.toBlob(function (blob) {\n            console.info(blob.size);\n            var f2 = new File([blob], fileName + \".webp\");\n            image.value = f2;\n            console.log(image.value);\n          }, 'image/webp', 0.5);\n        };\n      }\n    };\n\n    const brandFormSubmit = async () => {\n      const form = new FormData();\n      form.append(\"image\", image.value);\n      form.append(\"name\", brand_name.value);\n      form.append(\"description\", brand_description.value);\n      const brands = await brand.create(form);\n\n      if (brands.data.success) {\n        const payload = {\n          type: 'success',\n          message: brands.data.success\n        };\n        store.dispatch('addNotification', payload);\n        route.push('/admin/products/brand-add');\n      }\n    };\n\n    const ImgRemove = () => {\n      img_url.value = '';\n    };\n\n    return {\n      displayToCommunity,\n      img_url,\n      ImgChange,\n      ImgRemove,\n      image,\n      brandFormSubmit,\n      brand_description,\n      brand_name\n    };\n  },\n\n  data() {\n    return {\n      communities: []\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["ref","axios","brand","useStore","useRoute","setup","displayToCommunity","event","console","log","route","store","img_url","image","brand_description","brand_name","ImgChange","value","URL","createObjectURL","target","files","f","fileName","name","split","size","img","Image","src","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toBlob","blob","info","f2","File","brandFormSubmit","form","FormData","append","brands","create","data","success","payload","type","message","dispatch","push","ImgRemove","communities"],"sourceRoot":"","sources":["F:\\softvue\\src\\modules\\admin\\view\\product\\page\\brand\\BrandAddPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"product_page\">\r\n        <div class=\"page_setup\">\r\n            <form class=\"form_data short\" @submit.prevent=\"brandFormSubmit\" enctype=\"multipart-formdata\">\r\n                <h4 class=\"heading\">Add new Brand</h4>\r\n                <div class=\"mb_3\">\r\n                    <base-input label=\"Name\" v-model=\"brand_name\" placeholder=\"name\"></base-input>\r\n                </div>\r\n                \r\n                <div class=\"mb_3\">\r\n                    <base-textarea v-model=\"brand_description\" label=\"Description\" rowNum=\"6\" placeholder=\"description\"></base-textarea>\r\n                </div>\r\n                <div class=\"mb_3\">\r\n                    <div class=\"thumbnail\">\r\n                        <div class=\"img\">\r\n                            <div v-if=\"img_url != ''\" class=\"remove_btn\" @click=\"ImgRemove\">X</div>\r\n                            <img v-if=\"img_url == ''\" src=\"@/assets/admin/dummy-img.png\" alt=\"Thumbnail\">\r\n                            <img v-else :src=\"img_url\" alt=\"Thumbnail\">\r\n                        </div>\r\n                        <button type=\"button\" class=\"btn btn_border btn_sm\" @click=\"$refs.file.click()\">Upload/Add\r\n                            image</button>\r\n                        <input type=\"file\" ref=\"file\" class=\"d_none\" @change=\"ImgChange($event)\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"mb_3\">\r\n                    <base-button type=\"submit\">Add</base-button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref } from 'vue'\r\nimport axios from 'axios';\r\n// import  Image  from '@/Helpers/image.js'\r\nimport brand from './composible/brand-api.js';\r\nimport { useStore } from 'vuex';\r\nimport {useRoute} from 'vue-router';\r\nexport default {\r\n    setup() {\r\n\r\n\r\n        const displayToCommunity = (event) => {\r\n            console.log(event);\r\n        }\r\n        const route = useRoute()\r\n        const store = useStore();\r\n        const img_url = ref('');\r\n        const image = ref('');\r\n        const brand_description = ref('');\r\n        const brand_name  = ref('');\r\n\r\n\r\n        const ImgChange = (event) => {\r\n\r\n\r\n            img_url.value = URL.createObjectURL(event.target.files[0]);\r\n\r\n             var f = event.target.files[0];\r\n               \r\n                var fileName = f.name.split('.')[0];\r\n                console.log(f.size);\r\n                var img = new Image();\r\n                img.src = URL.createObjectURL(f);\r\n                if(f.size >=  100006){\r\n                     img.onload = function(){\r\n                    var canvas = document.createElement('canvas');\r\n                    canvas.width = img.width;\r\n                    canvas.height = img.height;\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.drawImage(img, 0, 0);\r\n                    canvas.toBlob(function(blob){\r\n                            console.info(blob.size);\r\n                            var f2 = new File([blob], fileName + \".webp\");\r\n                            image.value = f2;\r\n                            console.log(image.value);\r\n                       \r\n                    }, 'image/webp', 0.00001);\r\n                }\r\n                }else{\r\n                     img.onload = function(){\r\n                    var canvas = document.createElement('canvas');\r\n                    canvas.width = img.width;\r\n                    canvas.height = img.height;\r\n                    var ctx = canvas.getContext('2d');\r\n                    ctx.drawImage(img, 0, 0);\r\n                    canvas.toBlob(function(blob){\r\n                            console.info(blob.size);\r\n                            var f2 = new File([blob], fileName + \".webp\");\r\n                       \r\n                            image.value = f2;\r\n                            console.log(image.value);\r\n                       \r\n                    }, 'image/webp', 0.5);\r\n                    }\r\n                }\r\n \r\n           \r\n        }\r\n\r\n        const brandFormSubmit =  async() =>{\r\n             const form =  new FormData();\r\n                form.append(\"image\", image.value);\r\n                form.append(\"name\", brand_name.value);\r\n                form.append(\"description\", brand_description.value);\r\n                 const brands = await brand.create(form);\r\n                 if(brands.data.success){\r\n                    const payload = {\r\n                        type: 'success',\r\n                        message: brands.data.success\r\n                    }\r\n                    store.dispatch('addNotification', payload)\r\n                    route.push('/admin/products/brand-add')\r\n\r\n                 }\r\n\r\n               \r\n\r\n        }\r\n        const ImgRemove = () => {\r\n            img_url.value = '';\r\n        }\r\n\r\n        return { displayToCommunity, img_url, ImgChange, ImgRemove, image, brandFormSubmit, brand_description, brand_name }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            communities: []\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n\r\n\r\n\r\n\r\n.d_none {\r\n    display: none;\r\n}\r\n.thumbnail {\r\n    display: flex;\r\n    align-items: start;\r\n    gap: 16px;\r\n    .img {\r\n        position: relative;\r\n        img {\r\n            width: 60px;\r\n            height: 60px;\r\n            box-shadow: 0 10px 19px rgb(0 0 0 / 15%);\r\n            border: 1px solid #ddd;\r\n            border-radius: 4px;\r\n        }\r\n        .remove_btn {\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            width: 20px;\r\n            height: 20px;\r\n            background-color: #fff;\r\n            border-radius: 50%;\r\n            padding: 6px;\r\n            font-size: 12px;\r\n            line-height: 10px;\r\n            color: #f01a1a;\r\n            cursor: pointer;\r\n            &:hover {\r\n                background-color: #222;\r\n                color: #fff;\r\n            }\r\n        }\r\n    }\r\n    button {\r\n        border: 1px solid #135e96;\r\n        color: #135e96;\r\n        padding: 0.25rem 0.5rem;\r\n        background-color: transparent;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n    }\r\n}\r\n.form_data {\r\n    h4.heading {\r\n        margin-bottom: 20px;\r\n        color: #666;\r\n    }\r\n}\r\nform.form_data.short {\r\n    max-width: 600px;\r\n    margin: auto;\r\n    box-shadow: 0 5px 16px rgb(0 0 0 / 15%);\r\n    padding: 20px;\r\n    margin-top: 20px;\r\n}\r\n\r\n.mb_1 {\r\n    margin-bottom: 4px;\r\n}\r\n.mb_2 {\r\n    margin-bottom: 8px;\r\n}\r\n.mb_3 {\r\n    margin-bottom: 12px;\r\n}\r\n.mb_4 {\r\n    margin-bottom: 16px;\r\n}\r\n.mb_5 {\r\n    margin-bottom: 20px;\r\n}\r\n.mb_6 {\r\n    margin-bottom: 24px;\r\n}\r\n.mb_7 {\r\n    margin-bottom: 28px;\r\n}\r\n.mb_8 {\r\n    margin-bottom: 32px;\r\n}\r\n.mt_1 {\r\n    margin-top: 4px;\r\n}\r\n.mt_2 {\r\n    margin-top: 8px;\r\n}\r\n.mt_3 {\r\n    margin-top: 12px;\r\n}\r\n.mt_4 {\r\n    margin-top: 16px;\r\n}\r\n.mt_5 {\r\n    margin-top: 20px;\r\n}\r\n.mt_6 {\r\n    margin-top: 24px;\r\n}\r\n.mt_7 {\r\n    margin-top: 28px;\r\n}\r\n.mt_8 {\r\n    margin-top: 32px;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n$phone-width-small: 360px;\r\n$phone-width: 575px;\r\n$tablet-width: 767px;\r\n$desktop-width: 1023px;\r\n\r\n@media (max-width: #{$desktop-width}) {}\r\n\r\n@media (max-width: #{$tablet-width}) {}\r\n\r\n@media (max-width: #{$phone-width}) {}\r\n\r\n@media (max-width: #{$phone-width-small}) {}\r\n</style>"]},"metadata":{},"sourceType":"module"}