{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withKeys as _withKeys, withModifiers as _withModifiers, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, vShow as _vShow, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"search-select-placeholder\"\n};\nconst _hoisted_3 = {\n  ref: \"dropdown\",\n  class: \"search-select-dropdown\"\n};\nconst _hoisted_4 = {\n  ref: \"options\",\n  class: \"search-select-options\"\n};\nconst _hoisted_5 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_on_click_outside = _resolveComponent(\"on-click-outside\");\n\n  return _openBlock(), _createBlock(_component_on_click_outside, {\n    do: $options.close\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", {\n      class: _normalizeClass([\"search-select\", {\n        'is-active': $data.isOpen\n      }])\n    }, [_createElementVNode(\"button\", {\n      ref: \"button\",\n      onClick: _cache[0] || (_cache[0] = (...args) => $options.open && $options.open(...args)),\n      type: \"button\",\n      class: \"search-select-input\"\n    }, [$props.value !== null ? (_openBlock(), _createElementBlock(\"span\", _hoisted_1, _toDisplayString($props.value), 1\n    /* TEXT */\n    )) : (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"Soldier Select \"))], 512\n    /* NEED_PATCH */\n    ), _withDirectives(_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n      class: \"search-select-search\",\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.search = $event),\n      ref: \"search\",\n      onKeydown: [_cache[2] || (_cache[2] = _withKeys((...args) => $options.close && $options.close(...args), [\"esc\"])), _cache[3] || (_cache[3] = _withKeys((...args) => $options.highlightPrev && $options.highlightPrev(...args), [\"up\"])), _cache[4] || (_cache[4] = _withKeys((...args) => $options.highlightNext && $options.highlightNext(...args), [\"down\"])), _cache[5] || (_cache[5] = _withKeys(_withModifiers((...args) => $options.selectHighlighted && $options.selectHighlighted(...args), [\"prevent\"]), [\"enter\"])), _cache[6] || (_cache[6] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"tab\"]))]\n    }, null, 544\n    /* HYDRATE_EVENTS, NEED_PATCH */\n    ), [[_vModelText, $data.search]]), _withDirectives(_createElementVNode(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredOptions, (option, i) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        class: _normalizeClass([\"search-select-option\", {\n          'is-active': i === $data.highlightedIndex\n        }]),\n        key: option,\n        onClick: $event => $options.select(option)\n      }, _toDisplayString(option), 11\n      /* TEXT, CLASS, PROPS */\n      , _hoisted_5);\n    }), 128\n    /* KEYED_FRAGMENT */\n    ))], 512\n    /* NEED_PATCH */\n    ), [[_vShow, $options.filteredOptions.length > 0]]), _withDirectives(_createElementVNode(\"div\", {\n      class: \"search-select-empty\"\n    }, \" No results found for \\\"\" + _toDisplayString($data.search) + \"\\\" \", 513\n    /* TEXT, NEED_PATCH */\n    ), [[_vShow, $options.filteredOptions.length === 0]])], 512\n    /* NEED_PATCH */\n    ), [[_vShow, $data.isOpen]])], 2\n    /* CLASS */\n    )]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"do\"]);\n}","map":{"version":3,"mappings":";;;;;;EAUqBA,KAAK,EAAC;;;EAEhBC,GAAG,EAAC;EAA2BD,KAAK,EAAC;;;EAYtCC,GAAG,EAAC;EAEJD,KAAK,EAAC;;;;;;uBAzBdE,aA0CmBC,2BA1CnB,EA0CmB;IA1CAC,EAAE,EAAEC;EA0CJ,CA1CnB,EAA4B;sBAC1B,MAwCM,CAxCNC,oBAwCM,KAxCN,EAwCM;MAxCDN,KAAK,mBAAC,eAAD,EAAgB;QAAA,aAAwBO;MAAxB,CAAhB;IAwCJ,CAxCN,GACED,oBAQS,QART,EAQS;MAPPL,GAAG,EAAC,QAOG;MANNO,OAAK,yCAAEH,uCAAF,CAMC;MALPI,IAAI,EAAC,QAKE;MAJPT,KAAK,EAAC;IAIC,CART,GAMcU,iBAAK,sBAAjBC,oBAA8C,MAA9C,EAA8CC,UAA9C,EAA8CC,iBAAfH,YAAe,CAA9C,EAAoC;IAAA;IAApC,oBACAC,oBAAqE,MAArE,cAA+C,iBAA/C,GAPF;;IAAA,mBASAL,oBA6BM,KA7BN,cA6BM,iBA5BJA,oBASE,OATF,EASE;MARAN,KAAK,EAAC,sBAQN;iEAPSO,eAAMO,OAOf;MANAb,GAAG,EAAC,QAMJ;MALCc,SAAO,oDAAMV,2CAAK,SAAX,mDACKA,2DAAa,QADlB,mDAEOA,2DAAa,UAFpB,kEAGgBA,mEAAiB,yBAHjC,qDAIR,OAAoB,0BAJZ;IAKR,CATF;;IAAA,kBAEWE,eA0BP,kBAlBJD,oBAcK,IAdL,cAcK,oBATHK,oBAQKK,SARL,EAQK,IARL,EAQKC,YANmBZ,wBAMnB,EANkC,CAA7Ba,MAA6B,EAArBC,CAAqB,KAApB;2BAFnBR,oBAQK,IARL,EAQK;QAPHX,KAAK,mBAAC,sBAAD,EAAuB;UAAA,aAILmB,CAAC,KAAKZ;QAJD,CAAvB,EAOF;QALFa,GAAG,EAAEF,MAKH;QAJFV,OAAK,YAAEH,gBAAOa,MAAP;MAIL,CARL,mBAOKA,OAPL,EAOW;MAAA;MAPX,EAOWG,UAPX;KAQK,CARL;;IAAA,CASG,EAdL;;IAAA,aAEUhB,yBAAgBiB,MAAhB,GAAsB,IAgB5B,kBAHJhB,oBAEM,KAFN,EAEM;MAFqCN,KAAK,EAAC;IAE3C,CAFN,EAAuE,6BAC/Ca,iBAAGN,YAAH,CAD+C,GACnC,KADpC,EAEA;IAAA;IAFA,GAEA,UAFaF,yBAAgBiB,MAAhB,KAAsB,EAEnC,EACI,CA7BN;;IAAA,aAA4Bf,gBAV9B;;IAAA,CAwCM,EAzCoB;;;;EAAA,CAA5B;;EAAA","names":["class","ref","_createBlock","_component_on_click_outside","do","$options","_createElementVNode","$data","onClick","type","$props","_createElementBlock","_hoisted_1","_toDisplayString","$event","onKeydown","_Fragment","_renderList","option","i","key","_hoisted_5","length"],"sourceRoot":"","sources":["F:\\softvue\\src\\layout\\base\\SearchSelect.vue"],"sourcesContent":["<template>\r\n  <on-click-outside :do=\"close\">\r\n    <div class=\"search-select\" :class=\"{ 'is-active': isOpen }\">\r\n      <button\r\n        ref=\"button\"\r\n        @click=\"open\"\r\n        type=\"button\"\r\n        class=\"search-select-input\"\r\n      >\r\n        <span v-if=\"value !== null\">{{ value }}</span>\r\n        <span v-else class=\"search-select-placeholder\">Soldier Select </span>\r\n      </button>\r\n      <div ref=\"dropdown\" v-show=\"isOpen\" class=\"search-select-dropdown\">\r\n        <input\r\n          class=\"search-select-search\"\r\n          v-model=\"search\"\r\n          ref=\"search\"\r\n          @keydown.esc=\"close\"\r\n          @keydown.up=\"highlightPrev\"\r\n          @keydown.down=\"highlightNext\"\r\n          @keydown.enter.prevent=\"selectHighlighted\"\r\n          @keydown.tab.prevent\r\n        />\r\n        <ul\r\n          ref=\"options\"\r\n          v-show=\"filteredOptions.length > 0\"\r\n          class=\"search-select-options\"\r\n        >\r\n          <li\r\n            class=\"search-select-option\"\r\n            v-for=\"(option, i) in filteredOptions\"\r\n            :key=\"option\"\r\n            @click=\"select(option)\"\r\n            :class=\"{ 'is-active': i === highlightedIndex }\"\r\n          >\r\n            {{ option }}\r\n          </li>\r\n        </ul>\r\n        <div v-show=\"filteredOptions.length === 0\" class=\"search-select-empty\">\r\n          No results found for \"{{ search }}\"\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </on-click-outside>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n  components: {\r\n    OnClickOutside\r\n  },\r\n  props: [\"value\", \"options\", \"filterFunction\"],\r\n  data() {\r\n    return {\r\n      isOpen: false,\r\n      search: \"\",\r\n      highlightedIndex: 0\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // this.popper.destroy()\r\n  },\r\n  computed: {\r\n    filteredOptions() {\r\n      return this.filterFunction(this.search, this.options)\r\n    }\r\n  },\r\n  methods: {\r\n    open() {\r\n      if (this.isOpen) {\r\n        return\r\n      }\r\n      this.isOpen = true\r\n      this.$nextTick(() => {\r\n        // this.setupPopper()\r\n        this.$refs.search.focus()\r\n        this.scrollToHighlighted()\r\n      })\r\n    },\r\n    // setupPopper() {\r\n    // //   if (this.popper === undefined) {\r\n    // //     this.popper = new Popper(this.$refs.button, this.$refs.dropdown, {\r\n    // //       placement: \"bottom\"\r\n    // //     })\r\n    // //   } else {\r\n    // //     this.popper.scheduleUpdate()\r\n    // //   }\r\n    // },\r\n    close() {\r\n      if (!this.isOpen) {\r\n        return\r\n      }\r\n      this.isOpen = false\r\n      this.$refs.button.focus()\r\n    },\r\n    select(option) {\r\n      this.$emit(\"input\", option)\r\n      this.search = \"\"\r\n      this.highlightedIndex = 0\r\n      this.close()\r\n    },\r\n    selectHighlighted() {\r\n      this.select(this.filteredOptions[this.highlightedIndex])\r\n    },\r\n    scrollToHighlighted() {\r\n      this.$refs.options.children[this.highlightedIndex].scrollIntoView({\r\n        block: \"nearest\"\r\n      })\r\n    },\r\n    highlight(index) {\r\n      this.highlightedIndex = index\r\n\r\n      if (this.highlightedIndex < 0) {\r\n        this.highlightedIndex = this.filteredOptions.length - 1\r\n      }\r\n\r\n      if (this.highlightedIndex > this.filteredOptions.length - 1) {\r\n        this.highlightedIndex = 0\r\n      }\r\n\r\n      this.scrollToHighlighted()\r\n    },\r\n    highlightPrev() {\r\n      this.highlight(this.highlightedIndex - 1)\r\n    },\r\n    highlightNext() {\r\n      this.highlight(this.highlightedIndex + 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}